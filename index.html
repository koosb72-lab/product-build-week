<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸° (6/45)</title>
  <style>
    :root{
      /* ===== ë‹¤í¬ëª¨ë“œ(ê¸°ë³¸) ===== */
      --bg1:#070a18;
      --bg2:#0b1020;
      --card: rgba(255,255,255,0.06);
      --line: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.72);
      --shadow: 0 14px 45px rgba(0,0,0,0.35);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", Arial, sans-serif;
    }

    /* ===== í™”ì´íŠ¸(ë¼ì´íŠ¸) ëª¨ë“œ: bodyì— .lightê°€ ë¶™ìœ¼ë©´ ë³€ìˆ˜ ë®ì–´ì”€ ===== */
    body.light{
      --bg1:#f4f6fb;
      --bg2:#e9edf7;
      --card: rgba(255,255,255,0.92);
      --line: rgba(0,0,0,0.10);
      --text: rgba(0,0,0,0.88);
      --muted: rgba(0,0,0,0.60);
      --shadow: 0 10px 30px rgba(0,0,0,0.10);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(124,92,255,0.35), transparent 55%),
        radial-gradient(900px 500px at 80% 20%, rgba(45,212,191,0.22), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 40%, var(--bg1));
      transition: background .25s ease, color .25s ease;
    }
    .container{ max-width: 980px; margin:0 auto; padding: 26px 16px 80px; }

    header{
      position: sticky; top:0; z-index: 10;
      padding: 14px 16px;
      backdrop-filter: blur(12px);
      background: rgba(6,8,22,0.55);
      border-bottom: 1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      transition: background .25s ease, border-color .25s ease;
    }
    /* ë¼ì´íŠ¸ ëª¨ë“œì—ì„œ í—¤ë” ë°°ê²½ë„ ì¡°ê¸ˆ ë°ê²Œ */
    body.light header{
      background: rgba(255,255,255,0.70);
    }

    .brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:-0.4px; }
    .logo{
      width: 36px; height: 36px; border-radius: 12px;
      background: linear-gradient(135deg, #7c5cff, #2dd4bf);
      box-shadow: var(--shadow);
    }
    .chip{
      padding: 8px 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      text-decoration:none;
    }

    /* âœ… í…Œë§ˆ í† ê¸€ ë²„íŠ¼(ì¶”ê°€) */
    .theme-toggle{
      padding: 8px 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      font-size: 13px;
      color: var(--text);
      cursor: pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    body.light .theme-toggle{
      background: rgba(0,0,0,0.04);
    }

    .card{
      margin-top: 18px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    h1{ margin: 0; font-size: 18px; }
    .sub{ margin: 8px 0 0; color: var(--muted); line-height: 1.7; font-size: 14px; }

    .controls{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 14px;
      align-items:center;
    }
    .btn{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 750;
      transition: transform .15s ease, border-color .15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    body.light .btn{
      background: rgba(0,0,0,0.04);
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,0.28); }
    body.light .btn:hover{ border-color: rgba(0,0,0,0.22); }
    .btn:active{ transform: translateY(0); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(124,92,255,0.9), rgba(45,212,191,0.5));
      border-color: rgba(255,255,255,0.18);
    }
    .btn.danger{
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.18);
      color: rgba(255,255,255,0.86);
    }
    body.light .btn.danger{
      background: rgba(0,0,0,0.04);
      color: rgba(0,0,0,0.80);
      border-color: rgba(0,0,0,0.12);
    }

    .options{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-left:auto;
      align-items:center;
    }
    select, input[type="number"]{
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.22);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      outline: none;
      font-size: 14px;
    }
    body.light select, body.light input[type="number"]{
      background: rgba(255,255,255,0.90);
      color: rgba(0,0,0,0.88);
    }
    label{ color: var(--muted); font-size: 13px; display:flex; gap:8px; align-items:center; }

    .balls{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 16px;
      min-height: 62px;
      align-items:center;
    }

    .ball{
      width: 52px; height: 52px;
      border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      font-weight: 900;
      letter-spacing:-0.2px;
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      opacity: 0;
      transform: translateY(8px) scale(0.96);
      animation: pop .28s ease forwards;
      user-select:none;
      position: relative;
      overflow: hidden;
    }
    body.light .ball{
      border-color: rgba(0,0,0,0.10);
      box-shadow: 0 10px 25px rgba(0,0,0,0.10);
    }
    .ball::before{
      content:"";
      position:absolute;
      inset: -10% -10% auto -10%;
      height: 55%;
      background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.0));
      transform: rotate(-18deg);
      pointer-events:none;
      opacity: 0.45;
    }

    .ball.small{
      width: 42px; height: 42px;
      font-size: 14px;
    }
    @keyframes pop{
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .ball.yellow { background: #fbc400; color: #111; }
    .ball.blue   { background: #69c8f2; color: #111; }
    .ball.red    { background: #ff7272; color: #111; }
    .ball.gray   { background: #aaaaaa; color: #111; }
    .ball.green  { background: #b0d840; color: #111; }

    .meta{
      margin-top: 12px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
      display:flex; flex-wrap:wrap; gap:12px;
      align-items:center;
    }

    @media (max-width: 860px){
      .options{ margin-left: 0; }
    }

    .history{
      margin-top: 10px;
      border-top: 1px solid var(--line);
      padding-top: 12px;
      display:grid;
      gap: 10px;
    }
    .history-item{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      border-radius: 16px;
      padding: 12px 12px;
      display:flex;
      justify-content:space-between;
      gap: 12px;
      align-items:center;
    }
    body.light .history-item{
      background: rgba(0,0,0,0.03);
    }

    .history-left{
      display:flex; flex-direction:column; gap:6px;
      min-width: 140px;
    }
    .history-title{
      font-weight: 850; font-size: 14px;
    }
    .history-time{
      font-size: 12px; color: var(--muted);
      font-family: var(--mono);
    }

    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(6,8,22,0.82);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: var(--shadow);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      display:none;
      z-index: 99;
      max-width: min(560px, calc(100vw - 24px));
      font-size: 13px;
      line-height: 1.5;
      text-align:center;
    }
    body.light .toast{
      background: rgba(255,255,255,0.92);
      border-color: rgba(0,0,0,0.12);
      color: rgba(0,0,0,0.85);
    }

    .muted{ color: var(--muted); }
  </style>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo" aria-hidden="true"></div>
    <div>
      <div style="font-size:14px;">ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸°</div>
      <div style="font-size:12px; color: var(--muted);">6/45 Â· ì¤‘ë³µ ì—†ì´ ëœë¤</div>
    </div>
  </div>

  <!-- âœ… ì˜¤ë¥¸ìª½ ì˜ì—­: í…Œë§ˆ í† ê¸€ + ê¸°ì¡´ ë§í¬ -->
  <div style="display:flex; gap:10px; align-items:center;">
    <button class="theme-toggle" id="themeToggle" type="button">â˜€ í™”ì´íŠ¸ëª¨ë“œ</button>
    <a class="chip" href="#history">ìµœê·¼ ì¶”ì²¨</a>
  </div>
</header>

<main class="container">
  <section class="card">
    <h1>ì›í´ë¦­ ë¡œë˜ ë²ˆí˜¸ ë½‘ê¸°</h1>
    <p class="sub">
      ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>1~45</b>ì—ì„œ <b>ì¤‘ë³µ ì—†ì´ 6ê°œ</b>ë¥¼ ë½‘ì•„ <b>ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬</b>ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
      (ì´ ë„êµ¬ëŠ” ì¬ë¯¸/ì—°ìŠµìš©ì´ë©° ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
    </p>

    <div class="controls">
      <button class="btn primary" id="drawBtn">ğŸ² ì¶”ì²¨í•˜ê¸°</button>
      <button class="btn" id="copyBtn">ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬</button>
      <button class="btn danger" id="resetBtn">ğŸ§¹ ê¸°ë¡ ì´ˆê¸°í™”</button>

      <div class="options">
        <label>ì •ë ¬
          <select id="sortMode">
            <option value="asc" selected>ì˜¤ë¦„ì°¨ìˆœ</option>
            <option value="none">ë½‘ì€ ìˆœì„œ</option>
          </select>
        </label>

        <label>ìë™ ì¶”ì²¨(íšŒ)
          <input id="autoCount" type="number" min="1" max="10" value="1" />
        </label>
        <button class="btn" id="autoBtn">âš¡ ìë™ ì‹¤í–‰</button>
      </div>
    </div>

    <div class="balls" id="balls" aria-label="ì¶”ì²¨ ê²°ê³¼"></div>

    <div class="meta">
      <span>ê²°ê³¼: <b id="resultText" class="muted">-</b></span>
      <span>ë§ˆì§€ë§‰ ì¶”ì²¨: <b id="lastTime" class="muted">-</b></span>
    </div>
  </section>

  <section class="card" id="history">
    <h1>ìµœê·¼ ì¶”ì²¨ (ìµœëŒ€ 10ê°œ ì €ì¥)</h1>
    <p class="sub">ì¶”ì²¨ ê²°ê³¼ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤(ë¡œì»¬ ì €ì¥ì†Œ). ë‹¤ë¥¸ PC/ë¸Œë¼ìš°ì €ì—ëŠ” ê³µìœ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

    <div class="history" id="historyList"></div>
  </section>
</main>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
  // ===== ìœ í‹¸ =====
  const $ = (id) => document.getElementById(id);

  function toast(msg){
    const t = $("toast");
    t.textContent = msg;
    t.style.display = "block";
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(() => (t.style.display = "none"), 2400);
  }

  function pad2(n){ return String(n).padStart(2,"0"); }
  function nowStamp(){
    const d = new Date();
    return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
  }

  // ===== âœ… ë‹¤í¬/í™”ì´íŠ¸ ëª¨ë“œ í† ê¸€(ì¶”ê°€) =====
  const THEME_KEY = "lotto_theme_v1";

  function applyTheme(theme){
    if(theme === "light"){
      document.body.classList.add("light");
      $("themeToggle").textContent = "ğŸŒ™ ë‹¤í¬ëª¨ë“œ";
    }else{
      document.body.classList.remove("light");
      $("themeToggle").textContent = "â˜€ í™”ì´íŠ¸ëª¨ë“œ";
    }
    localStorage.setItem(THEME_KEY, theme);
  }

  // ì €ì¥ëœ í…Œë§ˆ ì ìš©(ì—†ìœ¼ë©´ ë‹¤í¬)
  applyTheme(localStorage.getItem(THEME_KEY) || "dark");

  $("themeToggle").addEventListener("click", () => {
    const isLight = document.body.classList.contains("light");
    applyTheme(isLight ? "dark" : "light");
  });

  // ===== ë²ˆí˜¸ì— ë”°ë¥¸ ìƒ‰ìƒ í´ë˜ìŠ¤ =====
  function getColorClass(n){
    if(n <= 10) return "yellow";
    if(n <= 20) return "blue";
    if(n <= 30) return "red";
    if(n <= 40) return "gray";
    return "green"; // 41~45
  }

  // ===== ë¡œë˜ ì¶”ì²¨ ë¡œì§(ì¤‘ë³µ ì—†ëŠ” 6ê°œ) =====
  function drawLotto(){
    const set = new Set();
    while(set.size < 6){
      const n = Math.floor(Math.random()*45) + 1; // 1~45
      set.add(n);
    }
    return Array.from(set); // ë½‘íŒ ìˆœì„œ
  }

  function renderBalls(numbers){
    const wrap = $("balls");
    wrap.innerHTML = "";

    numbers.forEach((n, idx) => {
      const b = document.createElement("div");
      b.className = "ball " + getColorClass(n);
      b.textContent = n;
      b.style.animationDelay = (idx * 60) + "ms";
      wrap.appendChild(b);
    });
  }

  // ===== ì €ì¥(ìµœê·¼ 10ê°œ) =====
  const STORAGE_KEY = "lotto_history_v1";

  function loadHistory(){
    try{
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    }catch{
      return [];
    }
  }

  function saveHistory(items){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(items.slice(0,10)));
  }

  function addHistory(entry){
    const list = loadHistory();
    list.unshift(entry);
    saveHistory(list);
    renderHistory();
  }

  function renderHistory(){
    const list = loadHistory();
    const box = $("historyList");
    box.innerHTML = "";

    if(list.length === 0){
      box.innerHTML = `<div class="muted" style="padding:10px 2px;">ì•„ì§ ì¶”ì²¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
      return;
    }

    list.forEach((item, i) => {
      const row = document.createElement("div");
      row.className = "history-item";

      const left = document.createElement("div");
      left.className = "history-left";
      left.innerHTML = `
        <div class="history-title">#${list.length - i} íšŒ</div>
        <div class="history-time">${item.time}</div>
      `;

      const balls = document.createElement("div");
      balls.className = "balls";
      balls.style.marginTop = "0";
      balls.style.minHeight = "unset";

      item.nums.forEach((n) => {
        const b = document.createElement("div");
        b.className = "ball small " + getColorClass(n);
        b.style.opacity = 1;
        b.style.transform = "none";
        b.style.animation = "none";
        b.textContent = n;
        balls.appendChild(b);
      });

      const useBtn = document.createElement("button");
      useBtn.className = "btn";
      useBtn.textContent = "ì´ ê²°ê³¼ ë³´ê¸°";
      useBtn.onclick = () => {
        renderBalls(item.nums);
        $("resultText").textContent = item.nums.join(", ");
        $("lastTime").textContent = item.time;
        toast("ì„ íƒí•œ ê¸°ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.");
        window.scrollTo({ top: 0, behavior: "smooth" });
      };

      row.appendChild(left);
      row.appendChild(balls);
      row.appendChild(useBtn);
      box.appendChild(row);
    });
  }

  // ===== UI ë™ì‘ =====
  function doDrawOnce(){
    const sortMode = $("sortMode").value;
    const raw = drawLotto(); // ë½‘ì€ ìˆœì„œ
    const nums = (sortMode === "asc") ? [...raw].sort((a,b)=>a-b) : raw;

    renderBalls(nums);

    const t = nowStamp();
    $("resultText").textContent = nums.join(", ");
    $("lastTime").textContent = t;

    addHistory({ time: t, nums });
  }

  async function copyCurrent(){
    const txt = $("resultText").textContent;
    if(!txt || txt === "-"){
      toast("ë³µì‚¬í•  ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì¶”ì²¨í•˜ì„¸ìš”.");
      return;
    }
    try{
      await navigator.clipboard.writeText(txt);
      toast("ë²ˆí˜¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤!");
    }catch{
      const ta = document.createElement("textarea");
      ta.value = txt;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      toast("ë²ˆí˜¸ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤! (ëŒ€ì²´ ë°©ì‹)");
    }
  }

  function resetAll(){
    localStorage.removeItem(STORAGE_KEY);
    $("balls").innerHTML = "";
    $("resultText").textContent = "-";
    $("lastTime").textContent = "-";
    renderHistory();
    toast("ê¸°ë¡ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
  }

  async function autoDraw(){
    let n = Number($("autoCount").value || 1);
    n = Math.max(1, Math.min(10, n)); // 1~10 ì œí•œ
    $("autoCount").value = n;

    toast(`ìë™ ì¶”ì²¨ ${n}íšŒ ì‹¤í–‰í•©ë‹ˆë‹¤.`);
    for(let i=0; i<n; i++){
      doDrawOnce();
      await new Promise(r => setTimeout(r, 350));
    }
  }

  // ===== ì´ë²¤íŠ¸ ë°”ì¸ë”© =====
  $("drawBtn").addEventListener("click", doDrawOnce);
  $("copyBtn").addEventListener("click", copyCurrent);
  $("resetBtn").addEventListener("click", resetAll);
  $("autoBtn").addEventListener("click", autoDraw);

  // ì´ˆê¸° ë Œë”
  renderHistory();
</script>
</body>
</html>
