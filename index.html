<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°, ì €ë…ë©”ë‰´ ì¶”ì²œ, ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸, AI íƒ€ë¡œì™€ í•¨ê»˜ í™•ë¥ /ì±…ì„ ì´ìš© ê°€ì´ë“œë¥¼ ì œê³µí•˜ëŠ” ì •ë³´í˜• ì›¹ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://koosb72-lab.github.io/product-build-week/" />
  <meta name="google-adsense-account" content="ca-pub-7981059984083694" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7981059984083694" crossorigin="anonymous"></script>
  <title>í–‰ìš´ì˜ ë„êµ¬í•¨ | Product Build Week</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=Noto+Sans+KR:wght@400;500;700;800&display=swap");

    :root{
      /* ===== ë¼ì´íŠ¸ëª¨ë“œ(ê¸°ë³¸) ===== */
      --bg1:#f7f5ef;
      --bg2:#ece8df;
      --card: rgba(255,255,255,0.82);
      --line: rgba(34,39,50,0.12);
      --text: rgba(26,30,39,0.92);
      --muted: rgba(46,53,64,0.66);
      --shadow: 0 16px 38px rgba(20,27,36,0.12);
      --radius: 18px;
      --primary: #0ea5a4;
      --secondary: #ff6f61;
      --gold: #f1b938;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
      --sans: "Outfit", "Noto Sans KR", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    body.light{
      --bg1:#f7f5ef;
      --bg2:#ece8df;
      --card: rgba(255,255,255,0.86);
      --line: rgba(34,39,50,0.12);
      --text: rgba(26,30,39,0.92);
      --muted: rgba(46,53,64,0.66);
      --shadow: 0 16px 38px rgba(20,27,36,0.12);
    }
    body:not(.light){
      --bg1:#091420;
      --bg2:#101e2f;
      --card: rgba(255,255,255,0.06);
      --line: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.93);
      --muted: rgba(255,255,255,0.70);
      --shadow: 0 14px 45px rgba(0,0,0,0.35);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(14,165,164,0.26), transparent 55%),
        radial-gradient(900px 500px at 80% 20%, rgba(255,111,97,0.18), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 40%, var(--bg1));
      transition: background .25s ease, color .25s ease;
    }
    .container{ max-width: 980px; margin:0 auto; padding: 20px 16px 80px; }

    header{
      position: sticky; top:0; z-index: 50;
      padding: 14px 16px;
      backdrop-filter: blur(12px);
      background: rgba(6,8,22,0.55);
      border-bottom: 1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      transition: background .25s ease, border-color .25s ease;
    }
    body.light header{ background: rgba(255,255,255,0.62); }

    .brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:-0.4px; cursor:pointer; }
    .logo{
      width: 36px; height: 36px; border-radius: 12px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      box-shadow: var(--shadow);
    }
    .nav-scroll { display:flex; gap:8px; overflow-x: auto; padding-bottom: 2px; }
    .chip{
      padding: 8px 12px; border: 1px solid var(--line); background: rgba(255,255,255,0.05);
      border-radius: 999px; font-size: 13px; color: var(--muted); text-decoration:none; cursor:pointer; white-space: nowrap;
      transition: 0.2s;
    }
    .chip.active {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #fff; border-color: transparent; font-weight: bold;
    }
    
    .theme-toggle{
      padding: 8px; border: 1px solid var(--line); background: rgba(255,255,255,0.05);
      border-radius: 50%; font-size: 14px; color: var(--text); cursor: pointer;
      display:inline-flex; align-items:center; justify-content:center; width:34px; height:34px;
    }
    body.light .theme-toggle{ background: rgba(0,0,0,0.04); }

    .card{
      margin-top: 18px; background: var(--card); border: 1px solid var(--line);
      border-radius: var(--radius); box-shadow: var(--shadow); padding: 20px;
    }

    h1{ margin: 0; font-size: 20px; font-weight: 800; }
    .sub{ margin: 8px 0 0; color: var(--muted); line-height: 1.6; font-size: 14px; }

    .btn{
      border: 1px solid var(--line); background: rgba(255,255,255,0.06); color: var(--text);
      padding: 10px 14px; border-radius: 12px; cursor:pointer; font-weight: 700; font-size: 14px;
      transition: transform .15s ease, border-color .15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    body.light .btn{ background: rgba(0,0,0,0.04); }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,0.3); }
    .btn:active{ transform: translateY(0); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(14,165,164,0.95), rgba(255,111,97,0.82));
      border-color: rgba(255,255,255,0.18); color: #fff;
    }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* ë¡œë˜ ìŠ¤íƒ€ì¼ */
    .balls{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 20px; min-height: 60px; align-items:center; }
    .ball{
      width: 50px; height: 50px; border-radius: 50%; display:flex; align-items:center; justify-content:center;
      font-weight: 900; font-size: 18px; border: 2px solid rgba(255,255,255,0.15);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2); opacity: 0; animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      color: #333; position: relative; overflow: hidden;
    }
    .ball::after { content:''; position:absolute; top:5%; left:5%; width:40%; height:40%; border-radius:50%; background: linear-gradient(135deg, rgba(255,255,255,0.8), transparent); pointer-events:none; }
    @keyframes pop{ from{ transform: translateY(10px) scale(0.8); opacity:0; } to{ transform: translateY(0) scale(1); opacity:1; } }
    .ball.yellow { background: #fbc400; }
    .ball.blue   { background: #69c8f2; }
    .ball.red    { background: #ff7272; }
    .ball.gray   { background: #aaaaaa; }
    .ball.green  { background: #b0d840; }

    /* íƒ€ë¡œ ìŠ¤íƒ€ì¼ (ê³ ê¸‰í™”) */
    .tarot-stage { text-align: center; }
    .tarot-deck {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
      gap: 8px; margin: 25px 0; justify-items: center; max-width: 600px; margin-left: auto; margin-right: auto;
    }
    .deck-card {
      width: 60px; height: 100px; border-radius: 8px; cursor: pointer;
      background: linear-gradient(140deg, #223f56 0%, #121f32 100%);
      border: 1px solid rgba(255,255,255,0.1); position: relative;
      transition: transform 0.25s, box-shadow 0.25s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    /* ì¹´ë“œ ë’·ë©´ íŒ¨í„´ */
    .deck-card::before {
      content: ""; position: absolute; inset: 4px; border: 1px dashed rgba(255,215,0,0.3); border-radius: 4px;
      background-image: radial-gradient(var(--primary) 1px, transparent 1px); background-size: 8px 8px; opacity: 0.5;
    }
    .deck-card:hover { transform: translateY(-6px); border-color: var(--primary); box-shadow: 0 10px 24px rgba(14,165,164,0.24); }
    .deck-card.selected {
      transform: translateY(-12px); border: 2px solid var(--gold);
      box-shadow: 0 0 15px rgba(255,215,0,0.4);
    }
    .deck-card.selected::after {
      content: attr(data-order); position: absolute; top: -8px; right: -8px;
      width: 22px; height: 22px; background: var(--gold); color: #000;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-weight: 900; font-size: 12px; z-index: 2; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .tarot-result-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 30px; }
    .tarot-slot { text-align: center; perspective: 1000px; }
    .tarot-slot-label { font-size: 12px; font-weight: 700; color: var(--muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
    
    .tarot-card {
      width: 100%; aspect-ratio: 2/3.4; position: relative; transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); margin: 0 auto;
    }
    .tarot-card.flipped { transform: rotateY(180deg); }
    .tarot-face {
      position: absolute; inset: 0; backface-visibility: hidden; border-radius: 12px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      box-shadow: var(--shadow); border: 1px solid rgba(255,255,255,0.1);
    }
    .tarot-back {
      background: #1a1a2e;
      background-image: 
        repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 10px),
        radial-gradient(circle at 50% 50%, rgba(124,92,255,0.1), transparent 70%);
    }
    .tarot-back::after { content: "âœ¨"; font-size: 24px; opacity: 0.7; }
    
    .tarot-front {
      transform: rotateY(180deg); background: linear-gradient(160deg, #203042, #0e1a29);
      border: 2px solid var(--gold);
      overflow: hidden;
    }
    .tarot-icon-large {
      width: calc(100% - 14px);
      height: calc(100% - 44px);
      margin-top: 7px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .tarot-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: contrast(1.03) saturate(1.05);
    }
    .tarot-name {
      font-size: 12px; font-weight: 800; color: #f8e4a3; text-align: center; padding: 6px 6px 8px;
      width: 100%; letter-spacing: 0.2px; background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.4));
    }
    
    .tarot-desc {
      margin-top: 15px; font-size: 13px; line-height: 1.6; text-align: left;
      background: rgba(255,255,255,0.03); padding: 12px; border-radius: 10px;
      border: 1px solid var(--line); color: var(--text); min-height: 100px;
    }

    /* ì €ë… ë©”ë‰´ ìŠ¤íƒ€ì¼ (ë³µêµ¬) */
    .dinner-stage { text-align: center; }
    .dinner-icon {
      width: 140px; height: 140px; border-radius: 50%; margin: 20px auto;
      background: var(--card); border: 2px solid var(--line);
      display:flex; align-items:center; justify-content:center; font-size: 70px;
      box-shadow: var(--shadow);
    }
    .dinner-name { font-size: 28px; font-weight: 900; margin: 10px 0; }
    .dinner-desc { color: var(--muted); font-size: 15px; line-height: 1.6; max-width: 600px; margin: 0 auto 20px; }

    /* ë™ë¬¼ìƒ ìŠ¤íƒ€ì¼ (ë³µêµ¬) */
    .animal-stage { text-align: center; }
    .upload-box {
      border: 2px dashed var(--line); border-radius: 16px; padding: 30px; margin: 20px 0;
      cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.02);
    }
    .upload-box:hover { border-color: var(--primary); background: rgba(124,92,255,0.05); }
    .preview-img { max-width: 100%; max-height: 300px; border-radius: 12px; display: none; margin: 0 auto; box-shadow: var(--shadow); }
    .animal-result { font-size: 24px; font-weight: 900; margin-top: 20px; color: var(--primary); }
    .animal-conf { color: var(--muted); font-size: 14px; margin-top: 5px; }

    /* ìœ í‹¸ë¦¬í‹° */
    .view.hidden { display: none; }
    .history-item {
      display: flex; justify-content: space-between; padding: 12px; border-bottom: 1px solid var(--line);
      font-size: 13px; color: var(--muted);
    }
    .history-item b { color: var(--text); letter-spacing: 1px; }

    .site-footer{ margin-top: 40px; padding: 20px; border-top: 1px solid var(--line); text-align: center; color: var(--muted); font-size: 12px; line-height: 1.8; }
    .footer-links a { color: var(--text); text-decoration: none; margin: 0 8px; }

    @media (max-width: 600px) {
      .tarot-result-grid { grid-template-columns: 1fr; gap: 20px; }
      .tarot-card { width: 140px; }
      .tarot-desc { min-height: auto; }
    }
  </style>
</head>

<body>
<header>
  <div class="brand" onclick="goHome()">
    <div class="logo"></div>
    <div>
      <div style="font-size:15px;">í–‰ìš´ì˜ ë„êµ¬í•¨</div>
      <div style="font-size:11px; color:var(--muted);">Product Build Week</div>
    </div>
  </div>
  <div style="display:flex; align-items:center; gap:8px;">
    <button class="chip" id="langToggle">EN</button>
    <button class="theme-toggle" id="themeToggle">â˜€</button>
  </div>
</header>

<main class="container">
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="nav-scroll">
    <button class="chip active" onclick="switchTab('lotto', this)">ğŸ° ë¡œë˜</button>
    <button class="chip" onclick="switchTab('tarot', this)">ğŸ”® íƒ€ë¡œ</button>
    <button class="chip" onclick="switchTab('dinner', this)">ğŸ½ ì €ë…ë©”ë‰´</button>
    <button class="chip" onclick="switchTab('animal', this)">ğŸ¶ ë™ë¬¼ìƒ</button>
    <button class="chip" onclick="switchTab('saju', this)">ğŸ“œ ì‚¬ì£¼</button>
  </nav>

  <!-- 1. ë¡œë˜ ë·° -->
  <div id="view-lotto" class="view">
    <section class="card">
      <h1>ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸°</h1>
      <p class="sub">1ë¶€í„° 45ê¹Œì§€ì˜ ìˆ«ì ì¤‘ ì¤‘ë³µ ì—†ì´ 6ê°œë¥¼ ë¬´ì‘ìœ„ë¡œ ì¶”ì²¨í•©ë‹ˆë‹¤.</p>
      
      <div class="controls" style="justify-content: space-between; display:flex; flex-wrap:wrap; gap:10px; align-items:center;">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <button class="btn primary" id="lottoDrawBtn">ğŸ² ë²ˆí˜¸ ë½‘ê¸°</button>
          <button class="btn" id="lottoCopyBtn">ğŸ“‹ ë³µì‚¬</button>
          <button class="btn" id="lottoResetBtn">ğŸ§¹ ê¸°ë¡ ì´ˆê¸°í™”</button>
        </div>
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
          <select id="lottoSort" style="padding:8px; border-radius:10px; border:1px solid var(--line); background:var(--card); color:var(--text);">
            <option value="asc">ì˜¤ë¦„ì°¨ìˆœ</option>
            <option value="raw">ë½‘ì€ ìˆœì„œ</option>
          </select>
          <input id="autoCount" type="number" min="1" max="10" value="1" class="btn" style="width:88px; text-align:left; cursor:text;" />
          <button class="btn" id="autoBtn">âš¡ ìë™ ì‹¤í–‰</button>
        </div>
      </div>

      <div class="balls" id="lottoBalls"></div>
      <div style="margin-top:12px; color:var(--muted); font-size:13px; display:flex; gap:12px; flex-wrap:wrap;">
        <span>ê²°ê³¼: <b id="lottoResultText" style="color:var(--text);">-</b></span>
        <span>ë§ˆì§€ë§‰ ì¶”ì²¨: <b id="lottoLastTime" style="color:var(--text);">-</b></span>
      </div>
    </section>

    <section class="card" id="lottoHistory">
      <h1>ìµœê·¼ ì¶”ì²¨ ê¸°ë¡</h1>
      <div id="lottoHistoryList"></div>
    </section>
  </div>

  <!-- 2. íƒ€ë¡œ ë·° (3ì¹´ë“œ ìŠ¤í”„ë ˆë“œ) -->
  <div id="view-tarot" class="view hidden">
    <section class="card tarot-stage">
      <h1>AI íƒ€ë¡œ (3-Card Spread)</h1>
      <p class="sub" id="tarotInstruction">ë§ˆìŒì„ ë¹„ìš°ê³  ì•„ë˜ ì¹´ë“œ ì¤‘ <b>3ì¥</b>ì„ ì„ íƒí•˜ì„¸ìš”.<br>(ìˆœì„œëŒ€ë¡œ ê³¼ê±°, í˜„ì¬, ë¯¸ë˜ë¥¼ ìƒì§•í•©ë‹ˆë‹¤)</p>
      
      <div class="tarot-deck" id="tarotDeck">
        <!-- JSë¡œ 22ì¥ ìƒì„± -->
      </div>

      <div id="tarotControls" style="margin-top:20px;">
        <button class="btn primary" id="tarotRevealBtn" disabled>âœ¨ ìš´ëª… í™•ì¸í•˜ê¸°</button>
        <button class="btn" onclick="resetTarot()">ğŸ”„ ë‹¤ì‹œ ì„ íƒ</button>
      </div>

      <div id="tarotResult" class="hidden">
        <div class="tarot-result-grid">
          <!-- ê³¼ê±° -->
          <div class="tarot-slot">
            <div class="tarot-slot-label">Past / Situation</div>
            <div class="tarot-card" id="tarotCard0">
              <div class="tarot-face tarot-back"></div>
              <div class="tarot-face tarot-front">
                <div class="tarot-icon-large"></div>
                <div class="tarot-name"></div>
              </div>
            </div>
            <div class="tarot-desc" id="tarotDesc0"></div>
          </div>
          <!-- í˜„ì¬ -->
          <div class="tarot-slot">
            <div class="tarot-slot-label">Present / Advice</div>
            <div class="tarot-card" id="tarotCard1">
              <div class="tarot-face tarot-back"></div>
              <div class="tarot-face tarot-front">
                <div class="tarot-icon-large"></div>
                <div class="tarot-name"></div>
              </div>
            </div>
            <div class="tarot-desc" id="tarotDesc1"></div>
          </div>
          <!-- ë¯¸ë˜ -->
          <div class="tarot-slot">
            <div class="tarot-slot-label">Future / Outcome</div>
            <div class="tarot-card" id="tarotCard2">
              <div class="tarot-face tarot-back"></div>
              <div class="tarot-face tarot-front">
                <div class="tarot-icon-large"></div>
                <div class="tarot-name"></div>
              </div>
            </div>
            <div class="tarot-desc" id="tarotDesc2"></div>
          </div>
        </div>
        <button class="btn primary" style="margin-top:30px;" onclick="resetTarot()">ğŸ´ ìƒˆë¡œìš´ ì  ë³´ê¸°</button>
      </div>
    </section>
  </div>

  <!-- 3. ì €ë…ë©”ë‰´ ë·° (ìƒì„¸ ë³µêµ¬) -->
  <div id="view-dinner" class="view hidden">
    <section class="card dinner-stage">
      <h1>ì˜¤ëŠ˜ ì €ë… ë­ ë¨¹ì§€?</h1>
      <p class="sub">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ë©”ë‰´ì™€ ì¶”ì²œ ì´ìœ ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
      
      <div style="display:flex; justify-content:center; gap:8px; margin-top:20px; flex-wrap:wrap;">
        <button class="chip" onclick="recommendDinner('all')">ğŸ² ì „ì²´ ëœë¤</button>
        <button class="chip" onclick="recommendDinner('korean')">ğŸ‡°ğŸ‡· í•œì‹</button>
        <button class="chip" onclick="recommendDinner('japanese')">ğŸ‡¯ğŸ‡µ ì¼ì‹</button>
        <button class="chip" onclick="recommendDinner('western')">ğŸ‡ºğŸ‡¸ ì–‘ì‹</button>
      </div>

      <div class="dinner-icon" id="dinnerIcon">ğŸ½</div>
      <div class="dinner-name" id="dinnerName">ë©”ë‰´ë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”</div>
      <p class="dinner-desc" id="dinnerDesc">ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì²œì„ ë°›ì•„ë³´ì„¸ìš”.</p>
      
      <button class="btn primary" onclick="recommendDinner()">ğŸ”„ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°</button>
    </section>
  </div>

  <!-- 4. ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸ (Teachable Machine ë³µêµ¬) -->
  <div id="view-animal" class="view hidden">
    <section class="card animal-stage">
      <h1>AI ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸</h1>
      <p class="sub">ì–¼êµ´ ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ ì¸ê³µì§€ëŠ¥ì´ ê°•ì•„ì§€ìƒ/ê³ ì–‘ì´ìƒì„ ë¶„ì„í•©ë‹ˆë‹¤.<br>(ì‚¬ì§„ì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤)</p>

      <label class="upload-box">
        <input type="file" id="animalInput" accept="image/*" style="display:none">
        <div id="animalPlaceholder">ğŸ“ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
        <img id="animalPreview" class="preview-img" />
      </label>

      <div id="animalResultArea" class="hidden">
        <div class="animal-result" id="animalResultText"></div>
        <div class="animal-conf" id="animalConfText"></div>
      </div>

      <button class="btn primary" id="animalPredictBtn" disabled>ğŸ” ë¶„ì„í•˜ê¸°</button>
    </section>
  </div>

  <!-- 5. ì‚¬ì£¼ ë·° (ë³µêµ¬) -->
  <div id="view-saju" class="view hidden">
    <section class="card">
      <h1>ì˜¤ëŠ˜ì˜ ì‚¬ì£¼ & ì„±í–¥</h1>
      <p class="sub">ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ ì˜¤í–‰ê³¼ ì˜¤ëŠ˜ì˜ ì¡°ì–¸ì„ ë“œë¦½ë‹ˆë‹¤.</p>
      
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:20px;">
        <label>
          <span style="font-size:12px; color:var(--muted);">ì¶œìƒ ì—°ë„</span>
          <input type="number" id="sajuYear" class="btn" style="width:100%; text-align:left; cursor:text;" value="1995">
        </label>
        <label>
          <span style="font-size:12px; color:var(--muted);">ì¶œìƒ ì›”</span>
          <input type="number" id="sajuMonth" class="btn" style="width:100%; text-align:left; cursor:text;" value="1">
        </label>
        <label>
          <span style="font-size:12px; color:var(--muted);">ì¶œìƒ ì¼</span>
          <input type="number" id="sajuDay" class="btn" style="width:100%; text-align:left; cursor:text;" value="1">
        </label>
        <label>
          <span style="font-size:12px; color:var(--muted);">ì‹œê°„ (0~23)</span>
          <input type="number" id="sajuTime" class="btn" style="width:100%; text-align:left; cursor:text;" value="12">
        </label>
      </div>

      <button class="btn primary" style="width:100%; justify-content:center; margin-top:20px;" onclick="analyzeSaju()">ğŸ“œ ì‚¬ì£¼ í’€ì´ ë³´ê¸°</button>

      <div id="sajuResult" class="card hidden" style="background:rgba(0,0,0,0.2); margin-top:20px;">
        <h3 style="margin:0 0 10px 0; color:var(--gold);">ë¶„ì„ ê²°ê³¼</h3>
        <div id="sajuContent" style="line-height:1.8; font-size:14px;"></div>
      </div>
    </section>
  </div>

  <section class="card" style="margin-top:30px;">
    <h1>ğŸ“š ì§€ì‹ ê°€ì´ë“œ</h1>
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:10px; margin-top:15px;">
      <a href="./guide-lotto.html" class="btn">ğŸ± ë¡œë˜ì˜ í™•ë¥ </a>
      <a href="./guide-dinner.html" class="btn">ğŸ§  ë©”ë‰´ ì„ íƒ ì‹¬ë¦¬</a>
      <a href="./guide-animal-test.html" class="btn">ğŸ¤– AI ì›ë¦¬</a>
      <a href="./guide-tarot.html" class="btn">ğŸƒ íƒ€ë¡œì™€ ë¬´ì˜ì‹</a>
    </div>
  </section>

  <footer class="site-footer">
    <div class="footer-links">
      <a href="./about.html">ì„œë¹„ìŠ¤ ì†Œê°œ</a>
      <a href="./contact.html">ë¬¸ì˜í•˜ê¸°</a>
      <a href="./privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="./terms.html">ì´ìš©ì•½ê´€</a>
    </div>
    <p>Â© 2026 Product Build Week. All rights reserved.</p>
  </footer>
</main>

<div id="toast" style="position:fixed; bottom:30px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.85); color:#fff; padding:10px 20px; border-radius:30px; font-size:14px; z-index:9999; display:none;"></div>

<!-- AI ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
/* ================= GLOBAL & UTIL ================= */
const $ = (id) => document.getElementById(id);
function showToast(msg) {
  const t = $("toast"); t.innerText = msg; t.style.display = "block";
  setTimeout(() => t.style.display = "none", 2500);
}
let currentLang = "ko"; // ê°„ë‹¨í™”: ì´ë²ˆ ë²„ì „ì€ í•œê¸€ ìš°ì„ 

/* ================= 1. TAB SWITCHING ================= */
function switchTab(tabName, btn) {
  document.querySelectorAll(".view").forEach(el => el.classList.add("hidden"));
  document.querySelectorAll(".nav-scroll .chip").forEach(el => el.classList.remove("active"));
  
  $(`view-${tabName}`).classList.remove("hidden");
  if(btn) btn.classList.add("active");
}
function goHome() { switchTab("lotto", document.querySelector(".nav-scroll .chip:first-child")); }

/* ================= 2. LOTTO LOGIC ================= */
const LOTTO_STORAGE_KEY = "lotto_history_v2";

function drawLottoRaw() {
  const set = new Set();
  while (set.size < 6) set.add(Math.floor(Math.random() * 45) + 1);
  return Array.from(set);
}

function nowStamp() {
  const d = new Date();
  const pad2 = (n) => String(n).padStart(2, "0");
  return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
}

function renderLottoBalls(nums) {
  const container = $("lottoBalls");
  container.innerHTML = "";
  nums.forEach((n, i) => {
    const ball = document.createElement("div");
    ball.className = `ball ${n<=10?'yellow':n<=20?'blue':n<=30?'red':n<=40?'gray':'green'}`;
    ball.textContent = n;
    ball.style.animationDelay = `${i * 0.1}s`;
    container.appendChild(ball);
  });
}

function loadLottoHistory() {
  try {
    return JSON.parse(localStorage.getItem(LOTTO_STORAGE_KEY) || "[]");
  } catch {
    return [];
  }
}

function saveLottoHistory(items) {
  localStorage.setItem(LOTTO_STORAGE_KEY, JSON.stringify(items.slice(0, 10)));
}

function renderLottoHistory() {
  const items = loadLottoHistory();
  const list = $("lottoHistoryList");
  list.innerHTML = "";
  if (!items.length) {
    list.innerHTML = `<div style="color:var(--muted); font-size:13px;">ì•„ì§ ì¶”ì²¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
    return;
  }

  items.forEach((item) => {
    const row = document.createElement("div");
    row.className = "history-item";
    row.innerHTML = `<span>${item.time}</span> <b>${item.nums.join(", ")}</b>`;
    list.appendChild(row);
  });
}

function doDrawOnce() {
  const raw = drawLottoRaw();
  const nums = $("lottoSort").value === "asc" ? [...raw].sort((a, b) => a - b) : raw;
  const time = nowStamp();

  renderLottoBalls(nums);
  $("lottoResultText").textContent = nums.join(", ");
  $("lottoLastTime").textContent = time;

  const list = loadLottoHistory();
  list.unshift({ time, nums });
  saveLottoHistory(list);
  renderLottoHistory();
}

$("lottoDrawBtn").onclick = doDrawOnce;

$("lottoCopyBtn").onclick = async () => {
  const txt = $("lottoResultText").textContent;
  if(!txt || txt === "-") return showToast("ë¨¼ì € ë²ˆí˜¸ë¥¼ ë½‘ì•„ì£¼ì„¸ìš”.");
  try {
    await navigator.clipboard.writeText(txt);
    showToast("ë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
  } catch {
    const ta = document.createElement("textarea");
    ta.value = txt;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand("copy");
    ta.remove();
    showToast("ë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
  }
};

$("lottoResetBtn").onclick = () => {
  localStorage.removeItem(LOTTO_STORAGE_KEY);
  $("lottoBalls").innerHTML = "";
  $("lottoResultText").textContent = "-";
  $("lottoLastTime").textContent = "-";
  renderLottoHistory();
  showToast("ë¡œë˜ ê¸°ë¡ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
};

$("autoBtn").onclick = async () => {
  let n = Number($("autoCount").value || 1);
  n = Math.max(1, Math.min(10, n));
  $("autoCount").value = n;
  showToast(`ìë™ ì¶”ì²¨ ${n}íšŒ ì‹¤í–‰í•©ë‹ˆë‹¤.`);
  for (let i = 0; i < n; i += 1) {
    doDrawOnce();
    await new Promise((r) => setTimeout(r, 350));
  }
};

/* ================= 3. TAROT LOGIC (3-Card Spread) ================= */
const TAROT_IMAGE_BASE = "https://commons.wikimedia.org/wiki/Special:FilePath/";
const TAROT_CARDS = [
  {name:"ë°”ë³´", en:"The Fool", icon:"ğŸƒ", img:`${TAROT_IMAGE_BASE}RWS_Tarot_00_Fool.jpg`, desc:"ìƒˆë¡œìš´ ì‹œì‘, ìˆœìˆ˜í•¨, ììœ ë¡œìš´ ëª¨í—˜. ë‘ë ¤ì›€ ì—†ì´ ì²«ë°œì„ ë‚´ë””ë””ì„¸ìš”."},
  {name:"ë§ˆë²•ì‚¬", en:"The Magician", icon:"ğŸª„", img:`${TAROT_IMAGE_BASE}RWS_Tarot_01_Magician.jpg`, desc:"ì°½ì¡°ì ì¸ í˜, ì ì¬ë ¥, ìì‹ ê°. ë‹¹ì‹ ì€ ì´ë¯¸ í•„ìš”í•œ ëŠ¥ë ¥ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤."},
  {name:"ì—¬ì‚¬ì œ", en:"The High Priestess", icon:"ğŸ“–", img:`${TAROT_IMAGE_BASE}RWS_Tarot_02_High_Priestess.jpg`, desc:"ì§ê´€, ì‹ ë¹„, ë‚´ë©´ì˜ ì§€í˜œ. í–‰ë™í•˜ê¸°ë³´ë‹¤ ë§ˆìŒì˜ ì†Œë¦¬ë¥¼ ë“¤ìœ¼ì„¸ìš”."},
  {name:"ì—¬í™©ì œ", en:"The Empress", icon:"ğŸ‘‘", img:`${TAROT_IMAGE_BASE}RWS_Tarot_03_Empress.jpg`, desc:"í’ìš”, ëª¨ì„±, ìì—°ì˜ ê²°ì‹¤. ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ ë”°ëœ»í•¨ì„ ë‚˜ëˆ„ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤."},
  {name:"í™©ì œ", en:"The Emperor", icon:"ğŸ›ï¸", img:`${TAROT_IMAGE_BASE}RWS_Tarot_04_Emperor.jpg`, desc:"ê¶Œìœ„, êµ¬ì¡°, ë¦¬ë”ì‹­. ê°ì •ë³´ë‹¤ëŠ” ì´ì„±ì ì´ê³  ì²´ê³„ì ì¸ ê³„íšì´ í•„ìš”í•©ë‹ˆë‹¤."},
  {name:"êµí™©", en:"The Hierophant", icon:"â›ª", img:`${TAROT_IMAGE_BASE}RWS_Tarot_05_Hierophant.jpg`, desc:"ì „í†µ, êµìœ¡, ì˜ì ì¸ ì¡°ì–¸. ë©˜í† ë‚˜ ì„ ë°°ì˜ ì¡°ì–¸ì´ ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤."},
  {name:"ì—°ì¸", en:"The Lovers", icon:"â¤ï¸", img:`${TAROT_IMAGE_BASE}RWS_Tarot_06_Lovers.jpg`, desc:"ì‚¬ë‘, ì¡°í™”, ì¤‘ìš”í•œ ì„ íƒ. ê°€ìŠ´ì´ ì‹œí‚¤ëŠ” ëŒ€ë¡œ, ì§„ì‹¬ì„ ë‹¤í•´ ì„ íƒí•˜ì„¸ìš”."},
  {name:"ì „ì°¨", en:"The Chariot", icon:"âš”ï¸", img:`${TAROT_IMAGE_BASE}RWS_Tarot_07_Chariot.jpg`, desc:"ìŠ¹ë¦¬, ì˜ì§€, ì¥ì• ë¬¼ ëŒíŒŒ. ëª©í‘œë¥¼ í–¥í•´ ê±°ì¹¨ì—†ì´ ì „ì§„í•´ì•¼ í•  ë•Œì…ë‹ˆë‹¤."},
  {name:"í˜", en:"Strength", icon:"ğŸ’ª", img:`${TAROT_IMAGE_BASE}RWS_Tarot_08_Strength.jpg`, desc:"ìš©ê¸°, ì¸ë‚´, ë¶€ë“œëŸ¬ìš´ í˜. ê°•ì••ì ì¸ íƒœë„ë³´ë‹¤ í¬ìš©ë ¥ì´ ë” í° í˜ì„ ë°œíœ˜í•©ë‹ˆë‹¤."},
  {name:"ì€ë‘”ì", en:"The Hermit", icon:"ğŸ§˜", img:`${TAROT_IMAGE_BASE}RWS_Tarot_09_Hermit.jpg`, desc:"ì„±ì°°, ê³ ë…, ì§„ë¦¬ íƒêµ¬. ì ì‹œ ë©ˆì¶° ì„œì„œ ìì‹ ì„ ëŒì•„ë³´ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤."},
  {name:"ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´", en:"Wheel of Fortune", icon:"ğŸ¡", img:`${TAROT_IMAGE_BASE}RWS_Tarot_10_Wheel_of_Fortune.jpg`, desc:"ë³€í™”, ê¸°íšŒ, ìš´ëª…ì ì¸ íë¦„. ìƒí™©ì´ ë°”ë€Œê³  ìˆìŠµë‹ˆë‹¤. íë¦„ì— ëª¸ì„ ë§¡ê¸°ì„¸ìš”."},
  {name:"ì •ì˜", en:"Justice", icon:"âš–ï¸", img:`${TAROT_IMAGE_BASE}RWS_Tarot_11_Justice.jpg`, desc:"ê³µì •í•¨, ì§„ì‹¤, ê· í˜•. ê°ì •ì— ì¹˜ìš°ì¹˜ì§€ ë§ê³  ê°ê´€ì ì¸ ì‹œê°ì„ ìœ ì§€í•˜ì„¸ìš”."},
  {name:"ë§¤ë‹¬ë¦° ì‚¬ëŒ", en:"The Hanged Man", icon:"ğŸ™ƒ", img:`${TAROT_IMAGE_BASE}RWS_Tarot_12_Hanged_Man.jpg`, desc:"í¬ìƒ, ìƒˆë¡œìš´ ê´€ì , ì •ì²´. ì–µì§€ë¡œ ì›€ì§ì´ë ¤ í•˜ì§€ ë§ê³  ë‹¤ë¥¸ ê°ë„ì—ì„œ ìƒí™©ì„ ë³´ì„¸ìš”."},
  {name:"ì£½ìŒ", en:"Death", icon:"ğŸ’€", img:`${TAROT_IMAGE_BASE}RWS_Tarot_13_Death.jpg`, desc:"ì¢…ê²°, ìƒˆë¡œìš´ ì‹œì‘, ë³€í™”. ëì€ ê³§ ìƒˆë¡œìš´ ì‹œì‘ì…ë‹ˆë‹¤. ê³¼ê±°ë¥¼ ë†“ì•„ì£¼ì„¸ìš”."},
  {name:"ì ˆì œ", en:"Temperance", icon:"ğŸ¥›", img:`${TAROT_IMAGE_BASE}RWS_Tarot_14_Temperance.jpg`, desc:"ê· í˜•, ì¡°í™”, ì¸ë‚´. ê·¹ë‹¨ì„ í”¼í•˜ê³  ì¤‘ìš©ì„ ì§€í‚¤ëŠ” ê²ƒì´ í•´ê²°ì±…ì…ë‹ˆë‹¤."},
  {name:"ì•…ë§ˆ", en:"The Devil", icon:"ğŸ˜ˆ", img:`${TAROT_IMAGE_BASE}RWS_Tarot_15_Devil.jpg`, desc:"ìœ í˜¹, ì§‘ì°©, êµ¬ì†. ë‚˜ë¥¼ ì˜­ì•„ë§¤ëŠ” ë¶€ì •ì ì¸ ìƒê°ì´ë‚˜ ìŠµê´€ì—ì„œ ë²—ì–´ë‚˜ì„¸ìš”."},
  {name:"íƒ‘", en:"The Tower", icon:"âš¡", img:`${TAROT_IMAGE_BASE}RWS_Tarot_16_Tower.jpg`, desc:"ê°‘ì‘ìŠ¤ëŸ° ë³€í™”, ë¶•ê´´, ê¹¨ë‹¬ìŒ. ê²¬ê³ í•´ ë³´ì´ë˜ ê²ƒì´ ë¬´ë„ˆì§ˆ ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” ì„±ì¥ì˜ ê¸°íšŒì…ë‹ˆë‹¤."},
  {name:"ë³„", en:"The Star", icon:"â­", img:`${TAROT_IMAGE_BASE}RWS_Tarot_17_Star.jpg`, desc:"í¬ë§, ì˜ê°, ì¹˜ìœ . ì–´ë‘ìš´ ë°¤í•˜ëŠ˜ì—ë„ ë³„ì€ ë¹›ë‚©ë‹ˆë‹¤. ê¸ì •ì ì¸ ë¯¸ë˜ë¥¼ ê¿ˆê¾¸ì„¸ìš”."},
  {name:"ë‹¬", en:"The Moon", icon:"ğŸŒ™", img:`${TAROT_IMAGE_BASE}RWS_Tarot_18_Moon.jpg`, desc:"ë¶ˆì•ˆ, í™˜ìƒ, ë¬´ì˜ì‹. ëˆˆì— ë³´ì´ëŠ” ê²ƒì´ ì „ë¶€ê°€ ì•„ë‹™ë‹ˆë‹¤. ë‚´ë©´ì˜ ë‘ë ¤ì›€ì„ ì§ì‹œí•˜ì„¸ìš”."},
  {name:"íƒœì–‘", en:"The Sun", icon:"â˜€ï¸", img:`${TAROT_IMAGE_BASE}RWS_Tarot_19_Sun.jpg`, desc:"ì„±ê³µ, í™œë ¥, ê¸°ì¨. ëª¨ë“  ê²ƒì´ ëª…í™•í•´ì§€ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤."},
  {name:"ì‹¬íŒ", en:"Judgement", icon:"ğŸº", img:`${TAROT_IMAGE_BASE}RWS_Tarot_20_Judgement.jpg`, desc:"ë¶€í™œ, ë³´ìƒ, ê²°ë‹¨. ê³¼ê±°ì˜ ë…¸ë ¥ì— ëŒ€í•œ ë³´ìƒì´ ì°¾ì•„ì˜µë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”."},
  {name:"ì„¸ê³„", en:"The World", icon:"ğŸŒ", img:`${TAROT_IMAGE_BASE}RWS_Tarot_21_World.jpg`, desc:"ì™„ì„±, í†µí•©, ì„±ì·¨. í•˜ë‚˜ì˜ ì—¬ì •ì´ ì„±ê³µì ìœ¼ë¡œ ë§ˆë¬´ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì™„ë²½í•œ íƒ€ì´ë°ì…ë‹ˆë‹¤."}
];

let selectedIndices = [];

function initTarot() {
  const deck = $("tarotDeck");
  deck.innerHTML = "";
  selectedIndices = [];
  $("tarotRevealBtn").disabled = true;
  $("tarotRevealBtn").innerText = "ì¹´ë“œ 3ì¥ì„ ì„ íƒí•˜ì„¸ìš”";
  
  for(let i=0; i<22; i++) {
    const c = document.createElement("div");
    c.className = "deck-card";
    c.onclick = () => pickCard(c, i);
    deck.appendChild(c);
  }
}

function pickCard(el, idx) {
  if(selectedIndices.includes(idx)) return;
  if(selectedIndices.length >= 3) return showToast("ì´ë¯¸ 3ì¥ì„ ëª¨ë‘ ì„ íƒí–ˆìŠµë‹ˆë‹¤.");
  
  el.classList.add("selected");
  selectedIndices.push(idx);
  el.setAttribute("data-order", selectedIndices.length); // 1, 2, 3 ìˆœì„œ í‘œì‹œ

  if(selectedIndices.length === 3) {
    $("tarotRevealBtn").disabled = false;
    $("tarotRevealBtn").innerText = "âœ¨ ìš´ëª… í™•ì¸í•˜ê¸°";
  }
}

$("tarotRevealBtn").onclick = () => {
  $("tarotDeck").style.display = "none";
  $("tarotControls").style.display = "none";
  $("tarotInstruction").style.display = "none";
  $("tarotResult").classList.remove("hidden");

  // ì„ íƒí•œ ì¹´ë“œ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„° ë§¤í•‘ (ëœë¤ ì•„ë‹˜, ì‚¬ìš©ìê°€ ê³ ë¥¸ ê²ƒ)
  // *ì‹¤ì œ íƒ€ë¡œëŠ” ë± ì„ê¸°ê°€ ì„ í–‰ë˜ì–´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„  ì¸ë±ìŠ¤ë¥¼ ë§¤í•‘í•´ ë³´ì—¬ì¤Œ
  // ë” ì¬ë¯¸ë¥¼ ìœ„í•´: ì‚¬ìš©ìê°€ ê³ ë¥¸ ì¸ë±ìŠ¤ -> ì…”í”Œëœ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¡œ ë§¤í•‘
  const shuffledData = [...TAROT_CARDS].sort(() => Math.random() - 0.5);
  
  selectedIndices.forEach((_, i) => {
    const cardData = shuffledData[i]; // ëœë¤ì„± ë¶€ì—¬
    const slot = $(`tarotCard${i}`);
    
    // ë°ì´í„° ì±„ìš°ê¸°
    slot.querySelector(".tarot-icon-large").innerHTML = `<img class="tarot-image" loading="lazy" src="${cardData.img}" alt="${cardData.name} ì¹´ë“œ ì´ë¯¸ì§€" onerror="this.remove(); this.parentElement.textContent='${cardData.icon}'; this.parentElement.style.fontSize='42px';">`;
    slot.querySelector(".tarot-name").textContent = cardData.name;
    $(`tarotDesc${i}`).innerText = cardData.desc;

    // ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜ (ìˆœì°¨ì )
    setTimeout(() => {
      slot.classList.add("flipped");
    }, i * 400 + 200);
  });
};

function resetTarot() {
  $("tarotResult").classList.add("hidden");
  $("tarotDeck").style.display = "grid";
  $("tarotControls").style.display = "block";
  $("tarotInstruction").style.display = "block";
  
  // ì¹´ë“œ ì´ˆê¸°í™”
  document.querySelectorAll(".tarot-card").forEach(el => el.classList.remove("flipped"));
  initTarot();
}

/* ================= 4. DINNER LOGIC (ë³µêµ¬) ================= */
const DINNER_DATA = [
  {cat:'korean', icon:'ğŸ²', name:'ê¹€ì¹˜ì°Œê°œ', desc:'í•œêµ­ì¸ì˜ ì†Œìš¸í‘¸ë“œ. ì˜ ìµì€ ê¹€ì¹˜ì™€ ë¼ì§€ê³ ê¸°ì˜ ì¡°í™”ê°€ ì¼í’ˆì…ë‹ˆë‹¤.'},
  {cat:'korean', icon:'ğŸ¥“', name:'ì‚¼ê²¹ì‚´', desc:'ì§€ê¸€ì§€ê¸€ êµ½ëŠ” ì†Œë¦¬ë¶€í„° ë§›ìˆëŠ” êµ­ë¯¼ ì™¸ì‹ ë©”ë‰´. ì†Œì£¼ í•œ ì” ì–´ë– ì„¸ìš”?'},
  {cat:'korean', icon:'ğŸ¥˜', name:'ë¶€ëŒ€ì°Œê°œ', desc:'í–„, ì†Œì‹œì§€, ë¼ë©´ì‚¬ë¦¬ì˜ í’ì„±í•œ ë§›. ì—¬ëŸ¿ì´ í•¨ê»˜ ë¨¹ê¸° ì¢‹ìŠµë‹ˆë‹¤.'},
  {cat:'japanese', icon:'ğŸ£', name:'ì´ˆë°¥', desc:'ì‹ ì„ í•œ ìƒì„ ê³¼ ë°¥ì˜ ì¡°í™”. ê¹”ë”í•˜ê³  ë“ ë“ í•œ í•œ ë¼ì…ë‹ˆë‹¤.'},
  {cat:'japanese', icon:'ğŸœ', name:'ë¼ë©˜', desc:'ì§„í•œ ìœ¡ìˆ˜ì™€ ì«„ê¹ƒí•œ ë©´ë°œ. ë”°ëœ»í•œ êµ­ë¬¼ì´ ìƒê°ë‚  ë•Œ ìµœê³ ì…ë‹ˆë‹¤.'},
  {cat:'japanese', icon:'ğŸ›', name:'ëˆì¹´ì¸ ', desc:'ë°”ì‚­í•œ íŠ€ê¹€ì˜·ê³¼ ë‘íˆ¼í•œ ê³ ê¸°. ë‚¨ë…€ë…¸ì†Œ ëˆ„êµ¬ë‚˜ ì¢‹ì•„í•˜ëŠ” ë©”ë‰´.'},
  {cat:'western', icon:'ğŸ•', name:'í”¼ì', desc:'ì¹˜ì¦ˆê°€ ë“¬ë¿ ë“¤ì–´ê°„ í”¼ì. ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ  ë¨¹ìœ¼ë©° íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ë‚´ë³´ì„¸ìš”.'},
  {cat:'western', icon:'ğŸ', name:'íŒŒìŠ¤íƒ€', desc:'í¬ë¦¼, í† ë§ˆí† , ì˜¤ì¼ ë“± ì·¨í–¥ëŒ€ë¡œ ê³¨ë¼ ì¦ê¸°ëŠ” ì´íƒˆë¦¬ì•„ì˜ ë§›.'},
  {cat:'western', icon:'ğŸ”', name:'ìˆ˜ì œë²„ê±°', desc:'ìœ¡ì¦™ ê°€ë“í•œ íŒ¨í‹°ì™€ ì‹ ì„ í•œ ì•¼ì±„. ê°„í¸í•˜ì§€ë§Œ ë“ ë“ í•©ë‹ˆë‹¤.'},
];
let lastDinnerCat = 'all';

function recommendDinner(cat) {
  if(cat) lastDinnerCat = cat;
  else cat = lastDinnerCat;

  const list = cat === 'all' ? DINNER_DATA : DINNER_DATA.filter(d => d.cat === cat);
  const picked = list[Math.floor(Math.random() * list.length)];

  $("dinnerIcon").innerText = picked.icon;
  $("dinnerName").innerText = picked.name;
  $("dinnerDesc").innerText = picked.desc;
}

/* ================= 5. ANIMAL FACE (Teachable Machine) ================= */
let animalModel;
const URL_MODEL = "https://teachablemachine.withgoogle.com/models/8lfLdOYC9/"; // ì˜ˆì‹œ ëª¨ë¸

$("animalInput").onchange = function(e) {
  const file = e.target.files[0];
  if(!file) return;
  
  const reader = new FileReader();
  reader.onload = function(event) {
    $("animalPreview").src = event.target.result;
    $("animalPreview").style.display = "block";
    $("animalPlaceholder").style.display = "none";
    $("animalPredictBtn").disabled = false;
    $("animalResultArea").classList.add("hidden");
  };
  reader.readAsDataURL(file);
};

$("animalPredictBtn").onclick = async function() {
  if(!animalModel) {
    showToast("AI ëª¨ë¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...");
    animalModel = await tmImage.load(URL_MODEL + "model.json", URL_MODEL + "metadata.json");
  }
  
  const img = $("animalPreview");
  const prediction = await animalModel.predict(img);
  prediction.sort((a,b) => b.probability - a.probability);
  
  const best = prediction[0];
  const conf = (best.probability * 100).toFixed(1);
  
  $("animalResultText").innerText = `ë‹¹ì‹ ì€ "${best.className}" ìƒì…ë‹ˆë‹¤!`;
  $("animalConfText").innerText = `í™•ì‹ ë„: ${conf}%`;
  $("animalResultArea").classList.remove("hidden");
};

/* ================= 6. SAJU LOGIC ================= */
function analyzeSaju() {
  const y = parseInt($("sajuYear").value);
  if(!y) return showToast("ì—°ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");

  const animals = ["ì›ìˆ­ì´","ë‹­","ê°œ","ë¼ì§€","ì¥","ì†Œ","í˜¸ë‘ì´","í† ë¼","ìš©","ë±€","ë§","ì–‘"];
  const animal = animals[y % 12];
  
  const elements = ["ëª©(ë‚˜ë¬´)", "í™”(ë¶ˆ)", "í† (í™)", "ê¸ˆ(ì‡ )", "ìˆ˜(ë¬¼)"];
  // ê°„ë‹¨ ë¡œì§: ì—°ë„ ëìë¦¬ì— ë”°ë¥¸ ì˜¤í–‰ (ì‹¤ì œ ëª…ë¦¬í•™ ì•½ì‹)
  const lastDigit = y % 10;
  let element = "";
  if(lastDigit===0 || lastDigit===1) element = "ê¸ˆ(Metal) - ê²°ë‹¨ë ¥ê³¼ ì˜ë¦¬";
  else if(lastDigit===2 || lastDigit===3) element = "ìˆ˜(Water) - ì§€í˜œì™€ ìœ ì—°í•¨";
  else if(lastDigit===4 || lastDigit===5) element = "ëª©(Wood) - ì„±ì¥ê³¼ ì˜ìš•";
  else if(lastDigit===6 || lastDigit===7) element = "í™”(Fire) - ì—´ì •ê³¼ ì˜ˆì˜";
  else element = "í† (Earth) - ì‹ ë¢°ì™€ í¬ìš©";

  const advices = [
    "ì˜¤ëŠ˜ì€ ì„œë‘ë¥´ì§€ ë§ê³  ì°¨ë¶„íˆ ê³„íšì„ ì ê²€í•˜ì„¸ìš”.",
    "ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ë² í‘¼ ì¹œì ˆì´ í° í–‰ìš´ìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.",
    "ìƒˆë¡œìš´ ë„ì „ì„ í•˜ê¸°ì— ì•„ì£¼ ì¢‹ì€ ê¸°ìš´ì´ ë“¤ì–´ì™€ ìˆìŠµë‹ˆë‹¤.",
    "ê±´ê°• ê´€ë¦¬ì— ìœ ì˜í•˜ê³  ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.",
    "ì˜ˆìƒì¹˜ ëª»í•œ ê³³ì—ì„œ ê·€ì¸ì„ ë§Œë‚  ìˆ˜ ìˆìœ¼ë‹ˆ ëŒ€ì¸ê´€ê³„ì— í˜ì“°ì„¸ìš”."
  ];
  const advice = advices[Math.floor(Math.random() * advices.length)];

  $("sajuContent").innerHTML = `
    <b>ë :</b> ${animal}ë <br>
    <b>ì˜¤í–‰ ì„±í–¥:</b> ${element}<br>
    <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:10px 0;">
    <b>ì˜¤ëŠ˜ì˜ ìš´ì„¸:</b><br>${advice}
  `;
  $("sajuResult").classList.remove("hidden");
}

/* ================= COMMON ================= */
const THEME_KEY = "pbw_theme_v1";
function applyTheme(theme) {
  if (theme === "light") {
    document.body.classList.add("light");
    $("themeToggle").textContent = "ğŸŒ™";
  } else {
    document.body.classList.remove("light");
    $("themeToggle").textContent = "â˜€";
  }
  localStorage.setItem(THEME_KEY, theme);
}

$("themeToggle").onclick = () => {
  const current = document.body.classList.contains("light") ? "light" : "dark";
  applyTheme(current === "light" ? "dark" : "light");
};

// ì´ˆê¸°í™”
applyTheme(localStorage.getItem(THEME_KEY) || "light");
renderLottoHistory();
initTarot();
</script>
</body>
</html>
