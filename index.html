<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°, ì €ë…ë©”ë‰´ ì¶”ì²œ, ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸ì™€ í•¨ê»˜ í™•ë¥ /ì±…ì„ ì´ìš© ê°€ì´ë“œë¥¼ ì œê³µí•˜ëŠ” ì •ë³´í˜• ì›¹ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://koosb72-lab.github.io/product-build-week/" />
  <meta name="google-adsense-account" content="ca-pub-7981059984083694" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7981059984083694" crossorigin="anonymous"></script>
  <title>ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸° (6/45)</title>
  <style>
    :root{
      /* ===== ë‹¤í¬ëª¨ë“œ(ê¸°ë³¸) ===== */
      --bg1:#070a18;
      --bg2:#0b1020;
      --card: rgba(255,255,255,0.06);
      --line: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.72);
      --shadow: 0 14px 45px rgba(0,0,0,0.35);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", Arial, sans-serif;
    }

    /* ===== í™”ì´íŠ¸(ë¼ì´íŠ¸) ëª¨ë“œ: bodyì— .lightê°€ ë¶™ìœ¼ë©´ ë³€ìˆ˜ ë®ì–´ì”€ ===== */
    body.light{
      --bg1:#f4f6fb;
      --bg2:#e9edf7;
      --card: rgba(255,255,255,0.92);
      --line: rgba(0,0,0,0.10);
      --text: rgba(0,0,0,0.88);
      --muted: rgba(0,0,0,0.60);
      --shadow: 0 10px 30px rgba(0,0,0,0.10);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(124,92,255,0.35), transparent 55%),
        radial-gradient(900px 500px at 80% 20%, rgba(45,212,191,0.22), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 40%, var(--bg1));
      transition: background .25s ease, color .25s ease;
    }
    .container{ max-width: 980px; margin:0 auto; padding: 26px 16px 80px; }

    header{
      position: sticky; top:0; z-index: 10;
      padding: 14px 16px;
      backdrop-filter: blur(12px);
      background: rgba(6,8,22,0.55);
      border-bottom: 1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      transition: background .25s ease, border-color .25s ease;
    }
    /* ë¼ì´íŠ¸ ëª¨ë“œì—ì„œ í—¤ë” ë°°ê²½ë„ ì¡°ê¸ˆ ë°ê²Œ */
    body.light header{
      background: rgba(255,255,255,0.70);
    }

    .brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:-0.4px; }
    .logo{
      width: 36px; height: 36px; border-radius: 12px;
      background: linear-gradient(135deg, #7c5cff, #2dd4bf);
      box-shadow: var(--shadow);
    }
    .chip{
      padding: 8px 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      text-decoration:none;
      cursor:pointer;
    }

    /* âœ… í…Œë§ˆ í† ê¸€ ë²„íŠ¼(ì¶”ê°€) */
    .theme-toggle{
      padding: 8px 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      font-size: 13px;
      color: var(--text);
      cursor: pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    body.light .theme-toggle{
      background: rgba(0,0,0,0.04);
    }

    .card{
      margin-top: 18px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    h1{ margin: 0; font-size: 18px; }
    .sub{ margin: 8px 0 0; color: var(--muted); line-height: 1.7; font-size: 14px; }

    .controls{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 14px;
      align-items:center;
    }
    .btn{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 750;
      transition: transform .15s ease, border-color .15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    body.light .btn{
      background: rgba(0,0,0,0.04);
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,0.28); }
    body.light .btn:hover{ border-color: rgba(0,0,0,0.22); }
    .btn:active{ transform: translateY(0); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(124,92,255,0.9), rgba(45,212,191,0.5));
      border-color: rgba(255,255,255,0.18);
    }
    .btn.danger{
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.18);
      color: rgba(255,255,255,0.86);
    }
    body.light .btn.danger{
      background: rgba(0,0,0,0.04);
      color: rgba(0,0,0,0.80);
      border-color: rgba(0,0,0,0.12);
    }

    .options{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-left:auto;
      align-items:center;
    }
    select, input[type="number"]{
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.22);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      outline: none;
      font-size: 14px;
    }
    body.light select, body.light input[type="number"]{
      background: rgba(255,255,255,0.90);
      color: rgba(0,0,0,0.88);
    }
    label{ color: var(--muted); font-size: 13px; display:flex; gap:8px; align-items:center; }

    .balls{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top: 16px;
      min-height: 62px;
      align-items:center;
    }

    .ball{
      width: 52px; height: 52px;
      border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      font-weight: 900;
      letter-spacing:-0.2px;
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      opacity: 0;
      transform: translateY(8px) scale(0.96);
      animation: pop .28s ease forwards;
      user-select:none;
      position: relative;
      overflow: hidden;
    }
    body.light .ball{
      border-color: rgba(0,0,0,0.10);
      box-shadow: 0 10px 25px rgba(0,0,0,0.10);
    }
    .ball::before{
      content:"";
      position:absolute;
      inset: -10% -10% auto -10%;
      height: 55%;
      background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.0));
      transform: rotate(-18deg);
      pointer-events:none;
      opacity: 0.45;
    }

    .ball.small{
      width: 42px; height: 42px;
      font-size: 14px;
    }
    @keyframes pop{
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .ball.yellow { background: #fbc400; color: #111; }
    .ball.blue   { background: #69c8f2; color: #111; }
    .ball.red    { background: #ff7272; color: #111; }
    .ball.gray   { background: #aaaaaa; color: #111; }
    .ball.green  { background: #b0d840; color: #111; }

    .meta{
      margin-top: 12px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
      display:flex; flex-wrap:wrap; gap:12px;
      align-items:center;
    }

    @media (max-width: 860px){
      .options{ margin-left: 0; }
    }

    .history{
      margin-top: 10px;
      border-top: 1px solid var(--line);
      padding-top: 12px;
      display:grid;
      gap: 10px;
    }
    .history-item{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      border-radius: 16px;
      padding: 12px 12px;
      display:flex;
      justify-content:space-between;
      gap: 12px;
      align-items:center;
    }
    body.light .history-item{
      background: rgba(0,0,0,0.03);
    }

    .history-left{
      display:flex; flex-direction:column; gap:6px;
      min-width: 140px;
    }
    .history-title{
      font-weight: 850; font-size: 14px;
    }
    .history-time{
      font-size: 12px; color: var(--muted);
      font-family: var(--mono);
    }

    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(6,8,22,0.82);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: var(--shadow);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      display:none;
      z-index: 99;
      max-width: min(560px, calc(100vw - 24px));
      font-size: 13px;
      line-height: 1.5;
      text-align:center;
    }
    body.light .toast{
      background: rgba(255,255,255,0.92);
      border-color: rgba(0,0,0,0.12);
      color: rgba(0,0,0,0.85);
    }

    .muted{ color: var(--muted); }

    .view.hidden{ display:none; }

    .dinner-card{
      text-align:center;
      padding: 28px 18px;
      background:
        radial-gradient(500px 240px at 50% -10%, rgba(124,92,255,0.28), transparent 60%),
        radial-gradient(400px 240px at 50% 110%, rgba(45,212,191,0.22), transparent 60%),
        var(--card);
    }

    .dinner-image{
      width: 156px;
      height: 156px;
      margin: 18px auto 12px;
      border-radius: 50%;
      border: 1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 72px;
      background: rgba(255,255,255,0.06);
      box-shadow: var(--shadow);
    }
    body.light .dinner-image{
      background: rgba(255,255,255,0.75);
    }

    .dinner-menu{
      margin: 6px 0 8px;
      font-size: 30px;
      font-weight: 900;
      letter-spacing: -0.4px;
    }
    .dinner-reason{
      margin: 0;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.8;
    }
    .dinner-meta{
      margin-top: 14px;
      color: var(--muted);
      font-size: 12px;
      font-family: var(--mono);
    }
    .dinner-actions{
      margin-top: 16px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }

    .animal-stage{
      text-align:center;
    }
    .animal-preview{
      width:min(320px, 90%);
      aspect-ratio: 1 / 1;
      border: 1px dashed var(--line);
      border-radius: 20px;
      margin: 14px auto;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(255,255,255,0.04);
      color: var(--muted);
      font-size: 14px;
    }
    .animal-preview img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:none;
    }
    .animal-result{
      margin-top: 10px;
      font-size: 26px;
      font-weight: 900;
      letter-spacing: -0.3px;
    }
    .animal-confidence{
      margin-top: 6px;
      color: var(--muted);
      font-size: 14px;
    }
    .animal-actions{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .saju-form{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
      margin-top: 14px;
    }
    .saju-form label{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:6px;
      font-size: 13px;
    }
    .saju-result{
      margin-top: 14px;
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      background: rgba(255,255,255,0.03);
      line-height: 1.8;
    }
    .saju-result h2{
      margin:0 0 8px;
      font-size: 16px;
    }
    .saju-actions{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .article-grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:12px;
      margin-top: 12px;
    }
    .article-item{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      background: rgba(255,255,255,0.03);
    }
    body.light .article-item{
      background: rgba(0,0,0,0.02);
    }
    .article-item h2{
      margin:0;
      font-size: 15px;
    }
    .article-item p{
      margin:8px 0 0;
      font-size: 13px;
      line-height: 1.75;
      color: var(--muted);
    }
    .site-footer{
      margin-top: 18px;
      padding: 18px;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: rgba(255,255,255,0.03);
      font-size: 13px;
      color: var(--muted);
      line-height: 1.8;
    }
    .footer-links{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top: 8px;
    }
    .footer-links a{
      color: var(--text);
      border:1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      text-decoration:none;
      font-size: 12px;
    }
    @media (max-width: 860px){
      .article-grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo" aria-hidden="true"></div>
    <div>
      <div id="brandTitle" style="font-size:14px;">ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸°</div>
      <div id="brandSub" style="font-size:12px; color: var(--muted);">6/45 Â· ì¤‘ë³µ ì—†ì´ ëœë¤</div>
    </div>
  </div>

  <!-- âœ… ì˜¤ë¥¸ìª½ ì˜ì—­: í…Œë§ˆ í† ê¸€ + ê¸°ì¡´ ë§í¬ -->
  <div style="display:flex; gap:10px; align-items:center;">
    <button class="chip" id="dinnerBtn" type="button">ğŸ½ ì €ë…ë©”ë‰´ ì¶”ì²œ</button>
    <button class="chip" id="animalTestBtn" type="button">ğŸ¶ ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸</button>
    <button class="chip" id="sajuBtn" type="button">ğŸ”® ì‚¬ì£¼ ë³´ê¸°</button>
    <button class="chip" id="langToggle" type="button">EN</button>
    <button class="theme-toggle" id="themeToggle" type="button">â˜€ í™”ì´íŠ¸ëª¨ë“œ</button>
    <a class="chip" id="historyLink" href="#history">ìµœê·¼ ì¶”ì²¨</a>
  </div>
</header>

<main class="container">
  <div class="view" id="lottoView">
  <section class="card">
    <h1 id="lottoTitle">ì›í´ë¦­ ë¡œë˜ ë²ˆí˜¸ ë½‘ê¸°</h1>
    <p class="sub" id="lottoSub">
      ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>1~45</b>ì—ì„œ <b>ì¤‘ë³µ ì—†ì´ 6ê°œ</b>ë¥¼ ë½‘ì•„ <b>ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬</b>ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. (ì´ ë„êµ¬ëŠ” ì¬ë¯¸/ì—°ìŠµìš©ì´ë©° ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
    </p>

    <div class="controls">
      <button class="btn primary" id="drawBtn">ğŸ² ì¶”ì²¨í•˜ê¸°</button>
      <button class="btn" id="copyBtn">ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬</button>
      <button class="btn danger" id="resetBtn">ğŸ§¹ ê¸°ë¡ ì´ˆê¸°í™”</button>

      <div class="options">
        <label><span id="sortLabel">ì •ë ¬</span>
          <select id="sortMode">
            <option id="sortAsc" value="asc" selected>ì˜¤ë¦„ì°¨ìˆœ</option>
            <option id="sortNone" value="none">ë½‘ì€ ìˆœì„œ</option>
          </select>
        </label>

        <label><span id="autoLabel">ìë™ ì¶”ì²¨(íšŒ)</span>
          <input id="autoCount" type="number" min="1" max="10" value="1" />
        </label>
        <button class="btn" id="autoBtn">âš¡ ìë™ ì‹¤í–‰</button>
      </div>
    </div>

    <div class="balls" id="balls" aria-label="ì¶”ì²¨ ê²°ê³¼"></div>

    <div class="meta">
      <span><span id="resultLabel">ê²°ê³¼</span>: <b id="resultText" class="muted">-</b></span>
      <span><span id="lastLabel">ë§ˆì§€ë§‰ ì¶”ì²¨</span>: <b id="lastTime" class="muted">-</b></span>
    </div>
  </section>

  <section class="card" id="history">
    <h1 id="historyTitle">ìµœê·¼ ì¶”ì²¨ (ìµœëŒ€ 10ê°œ ì €ì¥)</h1>
    <p class="sub" id="historySub">ì¶”ì²¨ ê²°ê³¼ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤(ë¡œì»¬ ì €ì¥ì†Œ). ë‹¤ë¥¸ PC/ë¸Œë¼ìš°ì €ì—ëŠ” ê³µìœ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

    <div class="history" id="historyList"></div>
  </section>
  </div>

  <div class="view hidden" id="dinnerView">
    <section class="card dinner-card">
      <h1 id="dinnerTitle">ì˜¤ëŠ˜ ì €ë… ë­ ë¨¹ì§€?</h1>
      <p class="sub" id="dinnerSub">ì·¨í–¥ì— ë§ëŠ” ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ëœë¤ìœ¼ë¡œ ì¶”ì²œë°›ì•„ ë³´ì„¸ìš”.</p>

      <div class="dinner-categories" style="display:flex; justify-content:center; gap:8px; margin-top:15px; flex-wrap:wrap;">
        <button class="chip" onclick="pickDinnerMenu('all')">ğŸ² ì „ì²´ ëœë¤</button>
        <button class="chip" onclick="pickDinnerMenu('korean')">ğŸ‡°ğŸ‡· í•œì‹</button>
        <button class="chip" onclick="pickDinnerMenu('japanese')">ğŸ‡¯ğŸ‡µ ì¼ì‹</button>
        <button class="chip" onclick="pickDinnerMenu('western')">ğŸ‡ºğŸ‡¸ ì–‘ì‹</button>
      </div>

      <div class="dinner-image" id="dinnerImage" aria-hidden="true">ğŸ½</div>
      <div class="dinner-menu" id="dinnerMenu">ì €ë…ë©”ë‰´ë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”</div>
      <p class="dinner-reason" id="dinnerReason">ìœ„ì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì—¬ ì¶”ì²œì„ ì‹œì‘í•´ë³´ì„¸ìš”.</p>
      <div class="dinner-meta"><span id="dinnerTimeLabel">ì¶”ì²œ ì‹œê°</span>: <b id="dinnerTime">-</b></div>

      <div class="dinner-actions">
        <button class="btn primary" id="dinnerAgainBtn" type="button">ğŸ”€ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°</button>
        <button class="btn" id="backToLottoBtn" type="button">ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ</button>
      </div>
    </section>
  </div>

  <div class="view hidden" id="animalView">
    <section class="card animal-stage">
      <h1 id="animalTitle">ê°•ì•„ì§€/ê³ ì–‘ì´ ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸</h1>
      <p class="sub" id="animalSub">ì–¼êµ´ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ ëª¨ë¸ì´ ê°•ì•„ì§€ìƒ/ê³ ì–‘ì´ìƒì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.</p>

      <input id="animalFileInput" type="file" accept="image/*" />
      <div class="animal-preview" id="animalPreviewText">
        <img id="animalPreviewImg" alt="animal preview" />
        <span id="animalPlaceholder">ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</span>
      </div>

      <div class="animal-result" id="animalResult">-</div>
      <div class="animal-confidence" id="animalConfidence">-</div>

      <div class="animal-actions">
        <button class="btn primary" id="animalRunBtn" type="button">ğŸ” ë™ë¬¼ìƒ ë¶„ì„</button>
        <button class="btn" id="animalBackBtn" type="button">ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ</button>
      </div>
    </section>
  </div>

  <div class="view hidden" id="sajuView">
    <section class="card">
      <h1 id="sajuTitle">ì˜¤ëŠ˜ì˜ ì‚¬ì£¼ ê°„ë‹¨ ë³´ê¸°</h1>
      <p class="sub" id="sajuSub">ìƒë…„ì›”ì¼ê³¼ íƒœì–´ë‚œ ì‹œê°„ì„ ì…ë ¥í•˜ë©´ ì˜¤í–‰ ì„±í–¥ê³¼ ì˜¤ëŠ˜ì˜ íë¦„ì„ ì°¸ê³ ìš©ìœ¼ë¡œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</p>

      <div class="saju-form">
        <label><span id="sajuYearLabel">ì¶œìƒ ì—°ë„</span>
          <input type="number" id="birthYear" min="1900" max="2100" value="1995" />
        </label>
        <label><span id="sajuMonthLabel">ì¶œìƒ ì›”</span>
          <input type="number" id="birthMonth" min="1" max="12" value="1" />
        </label>
        <label><span id="sajuDayLabel">ì¶œìƒ ì¼</span>
          <input type="number" id="birthDay" min="1" max="31" value="1" />
        </label>
        <label><span id="sajuHourLabel">ì¶œìƒ ì‹œê°„(24h)</span>
          <input type="number" id="birthHour" min="0" max="23" value="12" />
        </label>
      </div>

      <div class="saju-actions">
        <button class="btn primary" id="sajuRunBtn" type="button">âœ¨ ì‚¬ì£¼ ë³´ê¸°</button>
        <button class="btn" id="sajuBackBtn" type="button">ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ</button>
      </div>

      <div class="saju-result" id="sajuResult">
        <h2 id="sajuResultTitle">ê²°ê³¼ ì•ˆë‚´</h2>
        <div id="sajuResultBody">ì…ë ¥ í›„ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
      </div>
    </section>
  </div>

  <section class="card" id="comments">
    <h1 id="commentsTitle">ëŒ“ê¸€</h1>
    <p class="sub" id="commentsSub">Disqus ëŒ“ê¸€ ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document, s = d.createElement("script");
        s.src = "https://productbuildweek.disqus.com/embed.js";
        s.setAttribute("data-timestamp", +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </section>

  <section class="card" id="guides">
    <h1 id="guidesHeader">ì§€ì‹ ê°€ì´ë“œ & ì‹¬ì¸µ ë¶„ì„</h1>
    <p class="sub">
      ë‹¨ìˆœí•œ ë„êµ¬ ì‚¬ìš©ì„ ë„˜ì–´, ìš°ë¦¬ê°€ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ ë’¤ì— ìˆ¨ê²¨ì§„ ê³¼í•™ì  ì›ë¦¬ì™€ ìœ ìš©í•œ ìƒí™œ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. 
      Product Build WeekëŠ” ì‚¬ìš©ìì—ê²Œ ê°€ì¹˜ ìˆëŠ” ì •ë³´ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•©ë‹ˆë‹¤.
    </p>
    <div class="article-grid">
      <article class="article-item">
        <h2 id="guide1Title">1) ë¡œë˜ì˜ ê³¼í•™: í™•ë¥ ê³¼ í†µê³„</h2>
        <p>1ë“± ë‹¹ì²¨ í™•ë¥  814ë§Œ ë¶„ì˜ 1, ê·¸ ë’¤ì— ìˆ¨ê²¨ì§„ ìˆ˜í•™ì  ì§„ì‹¤ê³¼ ë„ë°•ì‚¬ì˜ ì˜¤ë¥˜ë¥¼ íŒŒí—¤ì³ ë´…ë‹ˆë‹¤.</p>
        <a href="./guide-lotto.html" style="display:inline-block; margin-top:10px; color:var(--primary); font-weight:700; text-decoration:none;">ìì„¸íˆ ì½ê¸° â†’</a>
      </article>
      <article class="article-item">
        <h2 id="guide2Title">2) ë©”ë‰´ ì„ íƒê³¼ ì‹¬ë¦¬í•™</h2>
        <p>ë§¤ì¼ ë°˜ë³µë˜ëŠ” 'ê²°ì • ì¥ì• 'ëŠ” ì™œ ë°œìƒí• ê¹Œìš”? ì˜ì‚¬ê²°ì • í”¼ë¡œë¥¼ ì¤„ì´ëŠ” ë‡Œ ê³¼í•™ì  íŒì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
        <a href="./guide-dinner.html" style="display:inline-block; margin-top:10px; color:var(--primary); font-weight:700; text-decoration:none;">ìì„¸íˆ ì½ê¸° â†’</a>
      </article>
      <article class="article-item">
        <h2 id="guide3Title">3) AI ì´ë¯¸ì§€ ë¶„ì„ì˜ ì›ë¦¬</h2>
        <p>ë‚´ ì–¼êµ´ì„ ë¶„ì„í•˜ëŠ” ì˜¨ë””ë°”ì´ìŠ¤ AI ê¸°ìˆ . ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ë©´ì„œ ì§€ëŠ¥ì ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ì›ë¦¬ë¥¼ ì•Œì•„ë´…ë‹ˆë‹¤.</p>
        <a href="./guide-animal-test.html" style="display:inline-block; margin-top:10px; color:var(--primary); font-weight:700; text-decoration:none;">ìì„¸íˆ ì½ê¸° â†’</a>
      </article>
    </div>
  </section>

  <footer class="site-footer">
    <div><strong>Product Build Week</strong>ëŠ” ë„êµ¬ì™€ ì •ë³´ì„± ì½˜í…ì¸ ë¥¼ í•¨ê»˜ ì œê³µí•˜ëŠ” ì‹¤í—˜í˜• ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.</div>
    <div>ë¬¸ì˜ ë° ì •ì±… ë¬¸ì„œëŠ” ì•„ë˜ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
    <div class="footer-links">
      <a href="./about.html">ì‚¬ì´íŠ¸ ì†Œê°œ</a>
      <a href="./contact.html">ë¬¸ì˜í•˜ê¸°</a>
      <a href="./privacy.html">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="./terms.html">ì´ìš©ì•½ê´€</a>
    </div>
  </footer>
</main>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
<script>
  // ===== ìœ í‹¸ =====
  const $ = (id) => document.getElementById(id);

  function toast(msg){
    const t = $("toast");
    t.textContent = msg;
    t.style.display = "block";
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(() => (t.style.display = "none"), 2400);
  }

  function pad2(n){ return String(n).padStart(2,"0"); }
  function nowStamp(){
    const d = new Date();
    return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
  }

  const LANG_KEY = "lotto_lang_v1";
  let currentLang = localStorage.getItem(LANG_KEY) || "ko";
  let lastDinner = null;
  const ANIMAL_MODEL_BASE = "https://teachablemachine.withgoogle.com/models/8lfLdOYC9/";
  let animalModel = null;
  let animalImageReady = false;

  const I18N = {
    ko: {
      brandTitle: "ë¡œë˜ ë²ˆí˜¸ ì¶”ì²¨ê¸°",
      brandSub: "6/45 Â· ì¤‘ë³µ ì—†ì´ ëœë¤",
      dinnerBtn: "ğŸ½ ì €ë…ë©”ë‰´ ì¶”ì²œ",
      historyLink: "ìµœê·¼ ì¶”ì²¨",
      lottoTitle: "ì›í´ë¦­ ë¡œë˜ ë²ˆí˜¸ ë½‘ê¸°",
      lottoSub: "ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>1~45</b>ì—ì„œ <b>ì¤‘ë³µ ì—†ì´ 6ê°œ</b>ë¥¼ ë½‘ì•„ <b>ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬</b>ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. (ì´ ë„êµ¬ëŠ” ì¬ë¯¸/ì—°ìŠµìš©ì´ë©° ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)",
      drawBtn: "ğŸ² ì¶”ì²¨í•˜ê¸°",
      copyBtn: "ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬",
      resetBtn: "ğŸ§¹ ê¸°ë¡ ì´ˆê¸°í™”",
      sortLabel: "ì •ë ¬",
      sortAsc: "ì˜¤ë¦„ì°¨ìˆœ",
      sortNone: "ë½‘ì€ ìˆœì„œ",
      autoLabel: "ìë™ ì¶”ì²¨(íšŒ)",
      autoBtn: "âš¡ ìë™ ì‹¤í–‰",
      resultLabel: "ê²°ê³¼",
      lastLabel: "ë§ˆì§€ë§‰ ì¶”ì²¨",
      historyTitle: "ìµœê·¼ ì¶”ì²¨ (ìµœëŒ€ 10ê°œ ì €ì¥)",
      historySub: "ì¶”ì²¨ ê²°ê³¼ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤(ë¡œì»¬ ì €ì¥ì†Œ). ë‹¤ë¥¸ PC/ë¸Œë¼ìš°ì €ì—ëŠ” ê³µìœ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
      commentsTitle: "ëŒ“ê¸€",
      commentsSub: "Disqus ëŒ“ê¸€ ê¸°ëŠ¥ì…ë‹ˆë‹¤.",
      sajuBtn: "ğŸ”® ì‚¬ì£¼ ë³´ê¸°",
      sajuTitle: "ì˜¤ëŠ˜ì˜ ì‚¬ì£¼ ê°„ë‹¨ ë³´ê¸°",
      sajuSub: "ìƒë…„ì›”ì¼ê³¼ íƒœì–´ë‚œ ì‹œê°„ì„ ì…ë ¥í•˜ë©´ ì˜¤í–‰ ì„±í–¥ê³¼ ì˜¤ëŠ˜ì˜ íë¦„ì„ ì°¸ê³ ìš©ìœ¼ë¡œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.",
      sajuYearLabel: "ì¶œìƒ ì—°ë„",
      sajuMonthLabel: "ì¶œìƒ ì›”",
      sajuDayLabel: "ì¶œìƒ ì¼",
      sajuHourLabel: "ì¶œìƒ ì‹œê°„(24h)",
      sajuRunBtn: "âœ¨ ì‚¬ì£¼ ë³´ê¸°",
      sajuBackBtn: "ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ",
      sajuResultTitle: "ê²°ê³¼ ì•ˆë‚´",
      sajuResultInit: "ì…ë ¥ í›„ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.",
      toastSajuInvalid: "ìƒë…„ì›”ì¼/ì‹œê°„ì„ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.",
      sajuYearAnimal: "ë ",
      sajuElement: "ì˜¤í–‰ ì„±í–¥",
      sajuAdvice: "ì˜¤ëŠ˜ì˜ ì¡°ì–¸",
      animalBtn: "ğŸ¶ ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸",
      animalTitle: "ê°•ì•„ì§€/ê³ ì–‘ì´ ë™ë¬¼ìƒ í…ŒìŠ¤íŠ¸",
      animalSub: "ì–¼êµ´ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ ëª¨ë¸ì´ ê°•ì•„ì§€ìƒ/ê³ ì–‘ì´ìƒì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.",
      animalPlaceholder: "ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.",
      animalRunBtn: "ğŸ” ë™ë¬¼ìƒ ë¶„ì„",
      animalBackBtn: "ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ",
      toastAnimalNoImage: "ë¨¼ì € ë¶„ì„í•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.",
      toastAnimalLoading: "ë™ë¬¼ìƒ ëª¨ë¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...",
      toastAnimalError: "ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.",
      animalResultPrefix: "ë¶„ì„ ê²°ê³¼",
      animalConfidencePrefix: "ì‹ ë¢°ë„",
      dinnerTitle: "ì˜¤ëŠ˜ ì €ë… ë­ ë¨¹ì§€?",
      dinnerSub: "ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©”ë‰´ì™€ ì¶”ì²œ ì´ìœ ë¥¼ ëœë¤ìœ¼ë¡œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.",
      dinnerPlaceholderTitle: "ì €ë…ë©”ë‰´ë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”",
      dinnerPlaceholderReason: "ì˜¤ë¥¸ìª½ ìœ„ ë²„íŠ¼ ë˜ëŠ” ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ì¶”ì²œì„ ì‹œì‘í•´ë³´ì„¸ìš”.",
      dinnerTimeLabel: "ì¶”ì²œ ì‹œê°",
      dinnerAgainBtn: "ğŸ”€ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°",
      backToLottoBtn: "ğŸ² ë¡œë˜ í™”ë©´ìœ¼ë¡œ",
      emptyHistory: "ì•„ì§ ì¶”ì²¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.",
      showResultBtn: "ì´ ê²°ê³¼ ë³´ê¸°",
      drawUnit: "íšŒ",
      toastDinner: "ì˜¤ëŠ˜ ì €ë… ì¶”ì²œ: {menu}",
      toastLoadResult: "ì„ íƒí•œ ê¸°ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.",
      toastNoCopy: "ë³µì‚¬í•  ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì¶”ì²¨í•˜ì„¸ìš”.",
      toastCopy: "ë²ˆí˜¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤!",
      toastCopyFallback: "ë²ˆí˜¸ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤! (ëŒ€ì²´ ë°©ì‹)",
      toastReset: "ê¸°ë¡ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.",
      toastAuto: "ìë™ ì¶”ì²¨ {n}íšŒ ì‹¤í–‰í•©ë‹ˆë‹¤."
    },
    en: {
      brandTitle: "Lotto Number Picker",
      brandSub: "6/45 Â· Random without duplicates",
      dinnerBtn: "ğŸ½ Dinner Suggestion",
      historyLink: "Recent Draws",
      lottoTitle: "One-click Lotto Draw",
      lottoSub: "Click the button to draw <b>6 unique numbers</b> from <b>1 to 45</b>, shown in <b>ascending order</b>. (For fun/practice only. Not a winning guarantee.)",
      drawBtn: "ğŸ² Draw Numbers",
      copyBtn: "ğŸ“‹ Copy Numbers",
      resetBtn: "ğŸ§¹ Reset History",
      sortLabel: "Sort",
      sortAsc: "Ascending",
      sortNone: "Draw Order",
      autoLabel: "Auto Draw (runs)",
      autoBtn: "âš¡ Run Auto",
      resultLabel: "Result",
      lastLabel: "Last Draw",
      historyTitle: "Recent Draws (up to 10 saved)",
      historySub: "Results are saved in your browser (local storage) and are not shared to other devices/browsers.",
      commentsTitle: "Comments",
      commentsSub: "Comments are powered by Disqus.",
      sajuBtn: "ğŸ”® Saju",
      sajuTitle: "Quick Saju Reading",
      sajuSub: "Enter birth date and hour to see a simple five-elements tendency and today guidance.",
      sajuYearLabel: "Birth year",
      sajuMonthLabel: "Birth month",
      sajuDayLabel: "Birth day",
      sajuHourLabel: "Birth hour (24h)",
      sajuRunBtn: "âœ¨ Read Saju",
      sajuBackBtn: "ğŸ² Back to Lotto",
      sajuResultTitle: "Result",
      sajuResultInit: "Fill in your birth info and click the button.",
      toastSajuInvalid: "Please enter a valid birth date and hour.",
      sajuYearAnimal: "Zodiac",
      sajuElement: "Element tendency",
      sajuAdvice: "Today advice",
      animalBtn: "ğŸ¶ Animal Face Test",
      animalTitle: "Dog/Cat Face Type Test",
      animalSub: "Upload a face image and the model predicts dog-like or cat-like type.",
      animalPlaceholder: "Please choose an image.",
      animalRunBtn: "ğŸ” Analyze",
      animalBackBtn: "ğŸ² Back to Lotto",
      toastAnimalNoImage: "Please select an image first.",
      toastAnimalLoading: "Loading animal-face model...",
      toastAnimalError: "An error occurred while analyzing. Please try again.",
      animalResultPrefix: "Result",
      animalConfidencePrefix: "Confidence",
      dinnerTitle: "What should I eat tonight?",
      dinnerSub: "Press the button to get a random dinner menu with a reason.",
      dinnerPlaceholderTitle: "Let's pick your dinner menu",
      dinnerPlaceholderReason: "Use the top-right button or the button below to start.",
      dinnerTimeLabel: "Recommended at",
      dinnerAgainBtn: "ğŸ”€ Recommend Again",
      backToLottoBtn: "ğŸ² Back to Lotto",
      emptyHistory: "No draw history yet.",
      showResultBtn: "View This Result",
      drawUnit: "draw",
      toastDinner: "Dinner recommendation: {menu}",
      toastLoadResult: "Loaded selected history result.",
      toastNoCopy: "No numbers to copy. Draw numbers first.",
      toastCopy: "Copied numbers to clipboard!",
      toastCopyFallback: "Copied numbers! (fallback method)",
      toastReset: "History has been reset.",
      toastAuto: "Running auto draw {n} times."
    }
  };

  const DINNER_MENU = [
    /* í•œì‹ (Korean) */
    { category: "korean", image: "ğŸ²", koName: "ê¹€ì¹˜ì°Œê°œ", enName: "Kimchi Stew", 
      koReason: "í•œêµ­ì¸ì˜ ì†Œìš¸í‘¸ë“œì…ë‹ˆë‹¤. ì˜ ìµì€ ê¹€ì¹˜ì™€ ë¼ì§€ê³ ê¸°ê°€ ì–´ìš°ëŸ¬ì§„ ì¹¼ì¹¼í•œ êµ­ë¬¼ì€ í•˜ë£¨ì˜ í”¼ë¡œë¥¼ ì”»ì–´ì£¼ë©°, ê°“ ì§€ì€ í°ìŒ€ë°¥ê³¼ í™˜ìƒì˜ ê¶í•©ì„ ìë‘í•©ë‹ˆë‹¤. ë¹„íƒ€ë¯¼ Cì™€ ìœ ì‚°ê· ì´ í’ë¶€í•œ ê¹€ì¹˜ëŠ” ë©´ì—­ë ¥ ê°•í™”ì—ë„ ë„ì›€ì„ ì¤ë‹ˆë‹¤.", 
      enReason: "The ultimate Korean soul food. This spicy stew with aged kimchi and pork perfectly relieves daily stress. It pairs wonderfully with steamed rice and offers probiotics and Vitamin C from the fermented kimchi." },
    { category: "korean", image: "ğŸ¥“", koName: "ì‚¼ê²¹ì‚´", enName: "Samgyeopsal", 
      koReason: "ì§€ê¸€ì§€ëŠ¥ êµ½ëŠ” ì†Œë¦¬ë¶€í„° ì¦ê±°ìš´ ëŒ€í‘œ ì™¸ì‹ ë©”ë‰´ì…ë‹ˆë‹¤. ê³ ì†Œí•œ ìœ¡ì¦™ê³¼ ìŒˆ ì±„ì†Œì˜ ì¡°í™”ëŠ” ë‹¨ë°±ì§ˆ ë³´ì¶©ì— ìµœì ì´ë©°, ë™ë£Œë‚˜ ê°€ì¡±ê³¼ í•¨ê»˜ ë‹´ì†Œë¥¼ ë‚˜ëˆ„ë©° ì¦ê¸°ê¸°ì— ì´ë³´ë‹¤ ë” ì¢‹ì€ ë©”ë‰´ëŠ” ì—†ìŠµë‹ˆë‹¤. í”¼ë¡œ í•´ì†Œì— ì¢‹ì€ ë¹„íƒ€ë¯¼ B1ì´ í’ë¶€í•©ë‹ˆë‹¤.", 
      enReason: "The sound of sizzling pork belly is pure joy. It's the best menu for protein charging and socializing with friends or family. High in Vitamin B1, it helps recover from physical fatigue." },
    { category: "korean", image: "ğŸ¥—", koName: "ë¹„ë¹”ë°¥", enName: "Bibimbap", 
      koReason: "ê°ì¢… ë‚˜ë¬¼ê³¼ ê³ ê¸°, ê³ ì¶”ì¥ì´ ì–´ìš°ëŸ¬ì§„ ì˜ì–‘ ê· í˜•ì˜ ê²°ì •ì²´ì…ë‹ˆë‹¤. ì‹ì´ì„¬ìœ ê°€ í’ë¶€í•˜ì—¬ ì†Œí™”ê°€ ì˜ ë˜ê³ , ì‹œê°ì ìœ¼ë¡œë„ ì•„ë¦„ë‹¤ì›Œ ë¨¹ëŠ” ì¦ê±°ì›€ì„ ë”í•©ë‹ˆë‹¤. ê°€ë³ì§€ë§Œ ë“ ë“ í•œ í•œ ë¼ë¥¼ ì›í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ìµœê³ ì˜ ì„ íƒì…ë‹ˆë‹¤.", 
      enReason: "A masterpiece of nutritional balance with assorted vegetables, beef, and chili paste. High in fiber and easy to digest, it's perfect for those seeking a healthy yet satisfying meal." },
    { category: "korean", image: "ğŸ¥˜", koName: "ë¶€ëŒ€ì°Œê°œ", enName: "Budae Jjigae", 
      koReason: "í–„, ì†Œì‹œì§€, ë¼ë©´ì‚¬ë¦¬ ë“± ë‹¤ì–‘í•œ ì¬ë£Œê°€ ë§Œë“¤ì–´ë‚´ëŠ” í’ì„±í•œ ë§›ì´ ì¼í’ˆì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì¬ë£Œê°€ ì–´ìš°ëŸ¬ì§„ ê¹Šì€ êµ­ë¬¼ ë§›ì€ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë‚ ë ¤ì£¼ê¸°ì— ì¶©ë¶„í•˜ë©°, ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ë‚˜ëˆ  ë¨¹ëŠ” ì¬ë¯¸ê°€ ìˆëŠ” ë©”ë‰´ì…ë‹ˆë‹¤.", 
      enReason: "A rich army base stew with ham, sausages, and ramen noodles. The complex flavors of various ingredients provide a deep, comforting taste that's great for group dining." },
    { category: "korean", image: "ğŸ—", koName: "ì–‘ë…ì¹˜í‚¨", enName: "Seasoned Chicken", 
      koReason: "ë‹¬ì½¤í•˜ê³  ë§¤ì½¤í•œ ì†ŒìŠ¤ê°€ ë°”ì‚­í•œ íŠ€ê¹€ì˜·ê³¼ ë§Œë‚œ ê±°ë¶€í•  ìˆ˜ ì—†ëŠ” ìœ í˜¹ì…ë‹ˆë‹¤. 'ì¹˜ë§¥'ì´ë¼ëŠ” ë‹¨ì–´ê°€ ìƒê¸¸ ì •ë„ë¡œ ì•¼ì‹ê³¼ ì €ë… ë©”ë‰´ë¡œ ì‚¬ë‘ë°›ìœ¼ë©°, íŠ¹ìœ ì˜ ê°ì¹ ë§›ì€ ì—”ë„ë¥´í•€ì„ ìƒì„±í•´ ê¸°ë¶„ ì „í™˜ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.", 
      enReason: "Irresistible crispy chicken coated in sweet and spicy sauce. Famous worldwide as 'K-Chicken,' its addictive flavor is perfect for boosting your mood after a long day." },

    /* ì¼ì‹ (Japanese) */
    { category: "japanese", image: "ğŸ£", koName: "ì´ˆë°¥", enName: "Sushi", 
      koReason: "ì‹ ì„ í•œ í•´ì‚°ë¬¼ì˜ í’ë¯¸ë¥¼ ê·¸ëŒ€ë¡œ ëŠë‚„ ìˆ˜ ìˆëŠ” ê¹”ë”í•œ ë©”ë‰´ì…ë‹ˆë‹¤. ì§€ë°©ì´ ì ê³  ë‹¨ë°±ì§ˆì´ í’ë¶€í•˜ì—¬ ëŠ¦ì€ ì €ë…ì—ë„ ëª¸ì— ë¶€ë‹´ì´ ì ìœ¼ë©°, ê³ ì¶”ëƒ‰ì´ì˜ ì•Œì‹¸í•œ ë§›ì€ ì…ë§›ì„ ë‹ìš°ê³  ì†Œí™”ë¥¼ ë•ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.", 
      enReason: "A clean and light meal that highlights the freshness of seafood. Low in fat and high in protein, it's easy on the stomach even late at night. Wasabi adds a refreshing kick and aids digestion." },
    { category: "japanese", image: "ğŸœ", koName: "ë¼ë©˜", enName: "Ramen", 
      koReason: "ì˜¤ëœ ì‹œê°„ ìš°ë ¤ë‚¸ ì§„í•œ ìœ¡ìˆ˜ê°€ ì¼í’ˆì¸ ì¼ë³¸ì‹ ë©´ ìš”ë¦¬ì…ë‹ˆë‹¤. ì°¨ìŠˆì™€ ë°˜ìˆ™ ë‹¬ê±€ ë“± ê³ ëª…ì´ ë”í•´ì§„ í•œ ê·¸ë¦‡ì€ ê¹Šì€ í¬ë§Œê°ì„ ì£¼ë©°, ë”°ëœ»í•œ êµ­ë¬¼ì€ ë§ˆìŒê¹Œì§€ ì°¨ë¶„í•˜ê²Œ ê°€ë¼ì•‰í˜€ ì£¼ëŠ” íë§ í‘¸ë“œì…ë‹ˆë‹¤.", 
      enReason: "Japanese noodle soup with a rich, long-simmered broth. Topped with chashu and soft-boiled egg, this bowl offers deep satisfaction and serves as a comforting soul food." },
    { category: "japanese", image: "ğŸ›", koName: "ëˆì¹´ì¸ ", enName: "Tonkatsu", 
      koReason: "ë‘íˆ¼í•œ ë¼ì§€ê³ ê¸°ë¥¼ ë°”ì‚­í•˜ê²Œ íŠ€ê²¨ë‚´ì–´ ê²‰ë°”ì†ì´‰ì˜ ì§„ìˆ˜ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì”¹ì„ ë•Œë§ˆë‹¤ í„°ì§€ëŠ” ìœ¡ì¦™ê³¼ ë‹¬ì½¤í•œ ì†ŒìŠ¤ì˜ ì¡°í™”ëŠ” ë‚¨ë…€ë…¸ì†Œ ëˆ„êµ¬ë‚˜ ì¢‹ì•„í•˜ëŠ” ë§›ì´ë©°, ë“ ë“ í•œ ì—ë„ˆì§€ì›ì´ ë˜ì–´ì¤ë‹ˆë‹¤.", 
      enReason: "Thick pork cutlets deep-fried to perfection. The contrast between the crispy breadcrumbs and juicy meat makes it a crowd favorite that provides plenty of energy." },
    { category: "japanese", image: "ğŸ¥£", koName: "ê·œë™", enName: "Gyudon", 
      koReason: "ë‹¬ì½¤ ì§­ì§¤í•œ ê°„ì¥ ì†ŒìŠ¤ì— ë³¶ì€ ì†Œê³ ê¸°ê°€ ì˜¬ë¼ê°„ ë®ë°¥ì…ë‹ˆë‹¤. ì¡°ë¦¬ ì‹œê°„ì´ ë¹¨ë¼ ë°”ìœ ì¼ìƒ ì†ì—ì„œ ë¹ ë¥´ê²Œ ì˜ì–‘ì„ ì±™ê¸¸ ìˆ˜ ìˆëŠ” 'íŒ¨ìŠ¤íŠ¸ ìŠ¬ë¡œí‘¸ë“œ'ì´ë©°, ìµìˆ™í•˜ë©´ì„œë„ í¸ì•ˆí•œ ë§›ì„ ì„ ì‚¬í•©ë‹ˆë‹¤.", 
      enReason: "Beef bowl simmered in a sweet and savory soy sauce. A perfect 'fast-slow food' for busy days, providing quick nutrition with a familiar, comforting taste." },
    { category: "japanese", image: "ğŸ¢", koName: "ì˜¤ë…ë‚˜ë² ", enName: "Oden Nabe", 
      koReason: "ë‹¤ì–‘í•œ ëª¨ì–‘ì˜ ì–´ë¬µê³¼ ì‹œì›í•œ êµ­ë¬¼ì´ ì–´ìš°ëŸ¬ì§„ ì „ê³¨ ìš”ë¦¬ì…ë‹ˆë‹¤. ìê·¹ì ì´ì§€ ì•Šê³  ë‹´ë°±í•œ ë§›ì´ íŠ¹ì§•ì´ë©°, ë”°ëœ»í•œ êµ­ë¬¼ì´ ì²´ì˜¨ì„ ë†’ì—¬ì£¼ê³  ëª¸ì„ ì´ì™„ì‹œì¼œ ìˆ™ë©´ì„ ì·¨í•˜ëŠ” ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 
      enReason: "A hot pot featuring various fish cakes in a light, clear broth. Its mild and clean flavor warms the body and helps relax you before a good night's sleep." },

    /* ì–‘ì‹ (Western) */
    { category: "western", image: "ğŸ", koName: "ê¹Œë¥´ë³´ë‚˜ë¼", enName: "Carbonara", 
      koReason: "í¬ë¦¼ê³¼ ë² ì´ì»¨, ì¹˜ì¦ˆì˜ í’ë¶€í•œ ê³ ì†Œí•¨ì„ ë§Œë½í•  ìˆ˜ ìˆëŠ” íŒŒìŠ¤íƒ€ì…ë‹ˆë‹¤. ë¶€ë“œëŸ¬ìš´ ì‹ê°ì€ ì‹¬ë¦¬ì  ì•ˆì •ê°ì„ ì£¼ë©°, íƒ„ìˆ˜í™”ë¬¼ê³¼ ì§€ë°©ì˜ ì¡°í™”ëŠ” ì—ë„ˆì§€ë¥¼ ì¦‰ê°ì ìœ¼ë¡œ ë³´ì¶©í•´ì£¼ì–´ í™œë ¥ì„ ë¶ë‹ì•„ ì¤ë‹ˆë‹¤.", 
      enReason: "A rich and creamy pasta with bacon and parmesan. The smooth texture provides a sense of comfort, while the combination of carbs and fats quickly recharges your energy levels." },
    { category: "western", image: "ğŸ•", koName: "í˜í¼ë¡œë‹ˆ í”¼ì", enName: "Pepperoni Pizza", 
      koReason: "ì§­ì§¤í•œ í˜í¼ë¡œë‹ˆì™€ ë…¹ì•„ë‚´ë¦° ì¹˜ì¦ˆê°€ í™˜ìƒì ì¸ í•˜ëª¨ë‹ˆë¥¼ ì´ë£¹ë‹ˆë‹¤. ë‹¤ í•¨ê»˜ ì¡°ê°ì„ ë‚˜ëˆ  ë¨¹ìœ¼ë©° íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ë‚¼ ìˆ˜ ìˆëŠ” ìµœê³ ì˜ ë©”ë‰´ì´ë©°, ì¹˜ì¦ˆì— ë“¤ì–´ìˆëŠ” íŠ¸ë¦½í† íŒì€ ìŠ¤íŠ¸ë ˆìŠ¤ ì™„í™”ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.", 
      enReason: "A perfect harmony of salty pepperoni and melted cheese. It's the best menu for creating a festive mood with others. Cheese contains tryptophan, which helps reduce stress." },
    { category: "western", image: "ğŸ¥©", koName: "ìŠ¤í…Œì´í¬", enName: "Steak", 
      koReason: "íŠ¹ë³„í•œ ë‚ ì´ ì•„ë‹ˆë”ë¼ë„ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì„ ë¬¼ì„ ì£¼ê³  ì‹¶ì„ ë•Œ ìµœì ì˜ ì„ íƒì…ë‹ˆë‹¤. í’ë¶€í•œ ë‹¨ë°±ì§ˆê³¼ ì² ë¶„ì€ ê·¼ìœ¡ ìƒì„±ê³¼ í”¼ë¡œ íšŒë³µì— ì§ì ‘ì ì¸ ë„ì›€ì„ ì£¼ë©°, ê³ ê¸° ë³¸ì—°ì˜ ë§›ì— ì§‘ì¤‘í•˜ë©° ë¯¸ì‹ì˜ ì¦ê±°ì›€ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 
      enReason: "The best treat for yourself. Rich in protein and iron, it directly aids muscle building and fatigue recovery. Focusing on the pure taste of meat provides a high-quality dining experience." },
    { category: "western", image: "ğŸ”", koName: "ìˆ˜ì œ ë²„ê±°", enName: "Handmade Burger", 
      koReason: "ì‹ ì„ í•œ ì±„ì†Œì™€ ë‘íˆ¼í•œ íŒ¨í‹°ê°€ ì¸µì¸µì´ ìŒ“ì—¬ ì˜ì–‘í•™ì ìœ¼ë¡œë„ í›Œë¥­í•œ í•œ ë¼ì…ë‹ˆë‹¤. í•œ ì…ì— ë² ì–´ ë¬¼ ë•Œ ëŠê»´ì§€ëŠ” ë‹¤ì–‘í•œ ì‹ê°ì˜ í–¥ì—°ì€ ì§€ë£¨í•œ ì¼ìƒì— ì‘ì€ ìê·¹ì´ ë˜ë©°, ë‚˜ë§Œì˜ ì»¤ìŠ¤í…€ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 
      enReason: "A nutritionally complete meal with fresh greens and a thick patty. The burst of textures in every bite provides a delightful sensory stimulation to your daily routine." },
    { category: "western", image: "ğŸ¥—", koName: "ì‹œì € ìƒëŸ¬ë“œ", enName: "Caesar Salad", 
      koReason: "ê³¼í•œ ì‹ì‚¬ê°€ ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ë‚ , ê°€ë²¼ìš°ë©´ì„œë„ ì•„ì‚­í•œ ì‹ê°ìœ¼ë¡œ ê¸°ë¶„ ì „í™˜ì„ ë„ì™€ì¤ë‹ˆë‹¤. ë¡œë©”ì¸ ìƒì¶”ì™€ í¬ë£¨í†µ, íŒŒë§ˆì‚° ì¹˜ì¦ˆì˜ ì¡°í™”ëŠ” ë¹„íƒ€ë¯¼ê³¼ ë¬´ê¸°ì§ˆì„ ë³´ì¶©í•´ì£¼ì–´ ëª¸ì„ ì •í™”í•˜ëŠ” ëŠë‚Œì„ ì¤ë‹ˆë‹¤.", 
      enReason: "A refreshing choice when you want to avoid a heavy meal. The combination of romaine, croutons, and parmesan provides essential vitamins and minerals, leaving you feeling cleansed." }
  ];

  function tr(key){
    return I18N[currentLang][key] || key;
  }

  function setThemeToggleLabel(){
    const isLight = document.body.classList.contains("light");
    if(currentLang === "en"){
      $("themeToggle").textContent = isLight ? "ğŸŒ™ Dark Mode" : "â˜€ Light Mode";
      return;
    }
    $("themeToggle").textContent = isLight ? "ğŸŒ™ ë‹¤í¬ëª¨ë“œ" : "â˜€ í™”ì´íŠ¸ëª¨ë“œ";
  }

  function applyLanguage(lang){
    currentLang = lang;
    localStorage.setItem(LANG_KEY, lang);
    $("langToggle").textContent = (lang === "ko") ? "EN" : "KO";
    $("brandTitle").textContent = tr("brandTitle");
    $("brandSub").textContent = tr("brandSub");
    $("dinnerBtn").textContent = tr("dinnerBtn");
    $("animalTestBtn").textContent = tr("animalBtn");
    $("sajuBtn").textContent = tr("sajuBtn");
    $("historyLink").textContent = tr("historyLink");
    $("lottoTitle").textContent = tr("lottoTitle");
    $("lottoSub").innerHTML = tr("lottoSub");
    $("drawBtn").textContent = tr("drawBtn");
    $("copyBtn").textContent = tr("copyBtn");
    $("resetBtn").textContent = tr("resetBtn");
    $("sortLabel").textContent = tr("sortLabel");
    $("sortAsc").textContent = tr("sortAsc");
    $("sortNone").textContent = tr("sortNone");
    $("autoLabel").textContent = tr("autoLabel");
    $("autoBtn").textContent = tr("autoBtn");
    $("resultLabel").textContent = tr("resultLabel");
    $("lastLabel").textContent = tr("lastLabel");
    $("historyTitle").textContent = tr("historyTitle");
    $("historySub").textContent = tr("historySub");
    $("commentsTitle").textContent = tr("commentsTitle");
    $("commentsSub").textContent = tr("commentsSub");
    $("sajuTitle").textContent = tr("sajuTitle");
    $("sajuSub").textContent = tr("sajuSub");
    $("sajuYearLabel").textContent = tr("sajuYearLabel");
    $("sajuMonthLabel").textContent = tr("sajuMonthLabel");
    $("sajuDayLabel").textContent = tr("sajuDayLabel");
    $("sajuHourLabel").textContent = tr("sajuHourLabel");
    $("sajuRunBtn").textContent = tr("sajuRunBtn");
    $("sajuBackBtn").textContent = tr("sajuBackBtn");
    $("sajuResultTitle").textContent = tr("sajuResultTitle");
    $("animalTitle").textContent = tr("animalTitle");
    $("animalSub").textContent = tr("animalSub");
    $("animalPlaceholder").textContent = tr("animalPlaceholder");
    $("animalRunBtn").textContent = tr("animalRunBtn");
    $("animalBackBtn").textContent = tr("animalBackBtn");
    $("dinnerTitle").textContent = tr("dinnerTitle");
    $("dinnerSub").textContent = tr("dinnerSub");
    $("dinnerTimeLabel").textContent = tr("dinnerTimeLabel");
    $("dinnerAgainBtn").textContent = tr("dinnerAgainBtn");
    $("backToLottoBtn").textContent = tr("backToLottoBtn");
    setThemeToggleLabel();
    if(lastDinner){
      renderDinner(lastDinner);
    }else{
      $("dinnerMenu").textContent = tr("dinnerPlaceholderTitle");
      $("dinnerReason").textContent = tr("dinnerPlaceholderReason");
    }
    if($("sajuResultBody").dataset.ready !== "1"){
      $("sajuResultBody").textContent = tr("sajuResultInit");
    }
    renderHistory();
  }

  function openDinnerView(){
    $("lottoView").classList.add("hidden");
    $("dinnerView").classList.remove("hidden");
    $("animalView").classList.add("hidden");
    $("sajuView").classList.add("hidden");
    $("historyLink").style.display = "none";
  }

  function openLottoView(){
    $("dinnerView").classList.add("hidden");
    $("animalView").classList.add("hidden");
    $("sajuView").classList.add("hidden");
    $("lottoView").classList.remove("hidden");
    $("historyLink").style.display = "inline-flex";
  }

  function openAnimalView(){
    $("lottoView").classList.add("hidden");
    $("dinnerView").classList.add("hidden");
    $("animalView").classList.remove("hidden");
    $("sajuView").classList.add("hidden");
    $("historyLink").style.display = "none";
  }

  function openSajuView(){
    $("lottoView").classList.add("hidden");
    $("dinnerView").classList.add("hidden");
    $("animalView").classList.add("hidden");
    $("sajuView").classList.remove("hidden");
    $("historyLink").style.display = "none";
  }

  function runSaju(){
    const year = Number($("birthYear").value);
    const month = Number($("birthMonth").value);
    const day = Number($("birthDay").value);
    const hour = Number($("birthHour").value);

    if(!Number.isInteger(year) || year < 1900 || year > 2100 ||
       !Number.isInteger(month) || month < 1 || month > 12 ||
       !Number.isInteger(day) || day < 1 || day > 31 ||
       !Number.isInteger(hour) || hour < 0 || hour > 23){
      toast(tr("toastSajuInvalid"));
      return;
    }

    const animalsKo = ["ì›ìˆ­ì´","ë‹­","ê°œ","ë¼ì§€","ì¥","ì†Œ","í˜¸ë‘ì´","í† ë¼","ìš©","ë±€","ë§","ì–‘"];
    const animalsEn = ["Monkey","Rooster","Dog","Pig","Rat","Ox","Tiger","Rabbit","Dragon","Snake","Horse","Sheep"];
    const elementsKo = ["ëª©(æœ¨)", "í™”(ç«)", "í† (åœŸ)", "ê¸ˆ(é‡‘)", "ìˆ˜(æ°´)"];
    const elementsEn = ["Wood", "Fire", "Earth", "Metal", "Water"];
    const adviceKo = [
      "ìƒˆë¡œìš´ ì‹œì‘ë³´ë‹¤ í˜„ì¬ ì¼ì˜ ì™„ì„±ë„ë¥¼ ë†’ì´ë©´ ì¢‹ì€ íë¦„ì´ ìƒê¹ë‹ˆë‹¤.",
      "ëŒ€í™”ì—ì„œ ë‹¨ì •ì ì¸ í‘œí˜„ì„ ì¤„ì´ë©´ ì¸ê°„ê´€ê³„ ìš´ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.",
      "ì‘ì€ ì§€ì¶œì„ ì •ë¦¬í•˜ë©´ ê¸ˆì „ íë¦„ì´ ì•ˆì •ë©ë‹ˆë‹¤.",
      "ëª¸ì˜ ë¦¬ë“¬ì„ ë§ì¶”ê¸° ìœ„í•´ ìˆ˜ë©´ ì‹œê°„ì„ ì¼ì •í•˜ê²Œ ìœ ì§€í•´ ë³´ì„¸ìš”.",
      "ì¤‘ìš”í•œ ê²°ì •ì€ ì˜¤ì „ë³´ë‹¤ ì˜¤í›„ì— ê²€í† í•˜ë©´ ì‹¤ìˆ˜ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤."
    ];
    const adviceEn = [
      "Focus on finishing current tasks rather than starting too many new ones.",
      "Softer wording in conversation can improve relationship flow today.",
      "Reviewing small expenses helps stabilize your money flow.",
      "Keep a consistent sleep schedule to maintain your physical rhythm.",
      "Important decisions may work better after a second review later in the day."
    ];

    const animalIdx = year % 12;
    const elementIdx = (year + month + day + hour) % 5;
    const adviceIdx = (year * 3 + month * 5 + day * 7 + hour) % 5;

    const animal = (currentLang === "ko") ? animalsKo[animalIdx] : animalsEn[animalIdx];
    const element = (currentLang === "ko") ? elementsKo[elementIdx] : elementsEn[elementIdx];
    const advice = (currentLang === "ko") ? adviceKo[adviceIdx] : adviceEn[adviceIdx];

    $("sajuResultBody").innerHTML = `
      <div><strong>${tr("sajuYearAnimal")}:</strong> ${animal}</div>
      <div><strong>${tr("sajuElement")}:</strong> ${element}</div>
      <div><strong>${tr("sajuAdvice")}:</strong> ${advice}</div>
    `;
    $("sajuResultBody").dataset.ready = "1";
  }

  function renderDinner(picked){
    // ì™¸ë¶€ ì‚¬ì§„ ì„œë¹„ìŠ¤ë¥¼ ì™„ì „íˆ ì œê±°í•˜ê³  ì´ëª¨ì§€ë§Œ ì‚¬ìš©
    $("dinnerImage").innerHTML = `<div style="font-size: 100px; line-height: 1.2;">${picked.image}</div>`;
    
    $("dinnerMenu").textContent = (currentLang === "ko") ? picked.koName : picked.enName;
    $("dinnerReason").textContent = (currentLang === "ko") ? picked.koReason : picked.enReason;
    $("dinnerTime").textContent = nowStamp();
  }

  let lastCategory = "all";
  function pickDinnerMenu(category = "all"){
    // categoryê°€ Event ê°ì²´ì¸ ê²½ìš° ë˜ëŠ” ëª…ì‹œì ì´ì§€ ì•Šì€ ê²½ìš° ì²˜ë¦¬
    if(typeof category !== 'string' || !category){
      category = lastCategory;
    }
    lastCategory = category;
    
    const list = category === "all" ? DINNER_MENU : DINNER_MENU.filter(m => m.category === category);
    const idx = Math.floor(Math.random() * list.length);
    lastDinner = list[idx];
    renderDinner(lastDinner);
    const menuName = (currentLang === "ko") ? lastDinner.koName : lastDinner.enName;
    toast(tr("toastDinner").replace("{menu}", menuName));
  }

  async function loadAnimalModel(){
    if(animalModel){
      return animalModel;
    }
    toast(tr("toastAnimalLoading"));
    const modelURL = ANIMAL_MODEL_BASE + "model.json";
    const metadataURL = ANIMAL_MODEL_BASE + "metadata.json";
    animalModel = await tmImage.load(modelURL, metadataURL);
    return animalModel;
  }

  function handleAnimalImageSelect(e){
    const file = e.target.files && e.target.files[0];
    const previewImg = $("animalPreviewImg");
    const placeholder = $("animalPlaceholder");
    if(!file){
      animalImageReady = false;
      previewImg.style.display = "none";
      placeholder.style.display = "inline";
      return;
    }
    previewImg.src = URL.createObjectURL(file);
    previewImg.style.display = "block";
    placeholder.style.display = "none";
    $("animalResult").textContent = "-";
    $("animalConfidence").textContent = "-";
    animalImageReady = true;
  }

  async function runAnimalTest(){
    if(!animalImageReady){
      toast(tr("toastAnimalNoImage"));
      return;
    }
    try{
      const model = await loadAnimalModel();
      const previewImg = $("animalPreviewImg");
      const prediction = await model.predict(previewImg);
      prediction.sort((a, b) => b.probability - a.probability);
      const top = prediction[0];
      $("animalResult").textContent = `${tr("animalResultPrefix")}: ${top.className}`;
      $("animalConfidence").textContent = `${tr("animalConfidencePrefix")}: ${(top.probability * 100).toFixed(1)}%`;
    }catch{
      toast(tr("toastAnimalError"));
    }
  }

  // ===== âœ… ë‹¤í¬/í™”ì´íŠ¸ ëª¨ë“œ í† ê¸€(ì¶”ê°€) =====
  const THEME_KEY = "lotto_theme_v1";

  function applyTheme(theme){
    if(theme === "light"){
      document.body.classList.add("light");
    }else{
      document.body.classList.remove("light");
    }
    setThemeToggleLabel();
    localStorage.setItem(THEME_KEY, theme);
  }

  // ì €ì¥ëœ í…Œë§ˆ ì ìš©(ì—†ìœ¼ë©´ ë‹¤í¬)
  applyTheme(localStorage.getItem(THEME_KEY) || "dark");

  $("themeToggle").addEventListener("click", () => {
    const isLight = document.body.classList.contains("light");
    applyTheme(isLight ? "dark" : "light");
  });
  $("langToggle").addEventListener("click", () => {
    applyLanguage(currentLang === "ko" ? "en" : "ko");
  });

  // ===== ë²ˆí˜¸ì— ë”°ë¥¸ ìƒ‰ìƒ í´ë˜ìŠ¤ =====
  function getColorClass(n){
    if(n <= 10) return "yellow";
    if(n <= 20) return "blue";
    if(n <= 30) return "red";
    if(n <= 40) return "gray";
    return "green"; // 41~45
  }

  // ===== ë¡œë˜ ì¶”ì²¨ ë¡œì§(ì¤‘ë³µ ì—†ëŠ” 6ê°œ) =====
  function drawLotto(){
    const set = new Set();
    while(set.size < 6){
      const n = Math.floor(Math.random()*45) + 1; // 1~45
      set.add(n);
    }
    return Array.from(set); // ë½‘íŒ ìˆœì„œ
  }

  function renderBalls(numbers){
    const wrap = $("balls");
    wrap.innerHTML = "";

    numbers.forEach((n, idx) => {
      const b = document.createElement("div");
      b.className = "ball " + getColorClass(n);
      b.textContent = n;
      b.style.animationDelay = (idx * 60) + "ms";
      wrap.appendChild(b);
    });
  }

  // ===== ì €ì¥(ìµœê·¼ 10ê°œ) =====
  const STORAGE_KEY = "lotto_history_v1";

  function loadHistory(){
    try{
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    }catch{
      return [];
    }
  }

  function saveHistory(items){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(items.slice(0,10)));
  }

  function addHistory(entry){
    const list = loadHistory();
    list.unshift(entry);
    saveHistory(list);
    renderHistory();
  }

  function renderHistory(){
    const list = loadHistory();
    const box = $("historyList");
    box.innerHTML = "";

    if(list.length === 0){
      box.innerHTML = `<div class="muted" style="padding:10px 2px;">${tr("emptyHistory")}</div>`;
      return;
    }

    list.forEach((item, i) => {
      const row = document.createElement("div");
      row.className = "history-item";

      const left = document.createElement("div");
      left.className = "history-left";
      left.innerHTML = `
        <div class="history-title">#${list.length - i} ${tr("drawUnit")}</div>
        <div class="history-time">${item.time}</div>
      `;

      const balls = document.createElement("div");
      balls.className = "balls";
      balls.style.marginTop = "0";
      balls.style.minHeight = "unset";

      item.nums.forEach((n) => {
        const b = document.createElement("div");
        b.className = "ball small " + getColorClass(n);
        b.style.opacity = 1;
        b.style.transform = "none";
        b.style.animation = "none";
        b.textContent = n;
        balls.appendChild(b);
      });

      const useBtn = document.createElement("button");
      useBtn.className = "btn";
      useBtn.textContent = tr("showResultBtn");
      useBtn.onclick = () => {
        renderBalls(item.nums);
        $("resultText").textContent = item.nums.join(", ");
        $("lastTime").textContent = item.time;
        toast(tr("toastLoadResult"));
        window.scrollTo({ top: 0, behavior: "smooth" });
      };

      row.appendChild(left);
      row.appendChild(balls);
      row.appendChild(useBtn);
      box.appendChild(row);
    });
  }

  // ===== UI ë™ì‘ =====
  function doDrawOnce(){
    const sortMode = $("sortMode").value;
    const raw = drawLotto(); // ë½‘ì€ ìˆœì„œ
    const nums = (sortMode === "asc") ? [...raw].sort((a,b)=>a-b) : raw;

    renderBalls(nums);

    const t = nowStamp();
    $("resultText").textContent = nums.join(", ");
    $("lastTime").textContent = t;

    addHistory({ time: t, nums });
  }

  async function copyCurrent(){
    const txt = $("resultText").textContent;
    if(!txt || txt === "-"){
      toast(tr("toastNoCopy"));
      return;
    }
    try{
      await navigator.clipboard.writeText(txt);
      toast(tr("toastCopy"));
    }catch{
      const ta = document.createElement("textarea");
      ta.value = txt;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      toast(tr("toastCopyFallback"));
    }
  }

  function resetAll(){
    localStorage.removeItem(STORAGE_KEY);
    $("balls").innerHTML = "";
    $("resultText").textContent = "-";
    $("lastTime").textContent = "-";
    renderHistory();
    toast(tr("toastReset"));
  }

  async function autoDraw(){
    let n = Number($("autoCount").value || 1);
    n = Math.max(1, Math.min(10, n)); // 1~10 ì œí•œ
    $("autoCount").value = n;

    toast(tr("toastAuto").replace("{n}", n));
    for(let i=0; i<n; i++){
      doDrawOnce();
      await new Promise(r => setTimeout(r, 350));
    }
  }

  // ===== ì´ë²¤íŠ¸ ë°”ì¸ë”© =====
  $("drawBtn").addEventListener("click", doDrawOnce);
  $("copyBtn").addEventListener("click", copyCurrent);
  $("resetBtn").addEventListener("click", resetAll);
  $("autoBtn").addEventListener("click", autoDraw);
  $("dinnerBtn").addEventListener("click", () => {
    openDinnerView();
    pickDinnerMenu();
  });
  $("animalTestBtn").addEventListener("click", openAnimalView);
  $("sajuBtn").addEventListener("click", openSajuView);
  $("animalFileInput").addEventListener("change", handleAnimalImageSelect);
  $("animalRunBtn").addEventListener("click", runAnimalTest);
  $("animalBackBtn").addEventListener("click", openLottoView);
  $("sajuRunBtn").addEventListener("click", runSaju);
  $("sajuBackBtn").addEventListener("click", openLottoView);
  $("dinnerAgainBtn").addEventListener("click", pickDinnerMenu);
  $("backToLottoBtn").addEventListener("click", openLottoView);

  // ì´ˆê¸° ë Œë”
  applyLanguage(currentLang);
</script>
</body>
</html>
